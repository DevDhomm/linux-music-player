(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{2976:(e,t,i)=>{"use strict";let r;i.d(t,{Mp:()=>eC,vL:()=>o,Sj:()=>B,fF:()=>eL,PM:()=>eM,zM:()=>eO});var n,a,s,o,l,u,c,h,f,d,p=i(9444),m=i(6677),g=i(2400);let y={display:"none"};function b(e){let{id:t,value:i}=e;return p.createElement("div",{id:t,style:y},i)}function w(e){let{id:t,announcement:i,ariaLiveType:r="assertive"}=e;return p.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},i)}let v=(0,p.createContext)(null),_={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},T={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was moved over droppable area "+i.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:i}=e;return i?"Draggable item "+t.id+" was dropped over droppable area "+i.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function x(e){let{announcements:t=T,container:i,hiddenTextDescribedById:r,screenReaderInstructions:n=_}=e,{announce:a,announcement:s}=function(){let[e,t]=(0,p.useState)("");return{announce:(0,p.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),o=(0,g.YG)("DndLiveRegion"),[l,u]=(0,p.useState)(!1);if((0,p.useEffect)(()=>{u(!0)},[]),!function(e){let t=(0,p.useContext)(v);(0,p.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,p.useMemo)(()=>({onDragStart(e){let{active:i}=e;a(t.onDragStart({active:i}))},onDragMove(e){let{active:i,over:r}=e;t.onDragMove&&a(t.onDragMove({active:i,over:r}))},onDragOver(e){let{active:i,over:r}=e;a(t.onDragOver({active:i,over:r}))},onDragEnd(e){let{active:i,over:r}=e;a(t.onDragEnd({active:i,over:r}))},onDragCancel(e){let{active:i,over:r}=e;a(t.onDragCancel({active:i,over:r}))}}),[a,t])),!l)return null;let c=p.createElement(p.Fragment,null,p.createElement(b,{id:r,value:n.draggable}),p.createElement(w,{id:o,announcement:s}));return i?(0,m.createPortal)(c,i):c}function k(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(n||(n={}));let I=Object.freeze({x:0,y:0});function A(e,t){let{data:{value:i}}=e,{data:{value:r}}=t;return r-i}let E=e=>{let{collisionRect:t,droppableRects:i,droppableContainers:r}=e,n=[];for(let e of r){let{id:r}=e,a=i.get(r);if(a){let i=function(e,t){let i=Math.max(t.top,e.top),r=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(r<n&&i<a){let s=t.width*t.height,o=e.width*e.height,l=(n-r)*(a-i);return Number((l/(s+o-l)).toFixed(4))}return 0}(a,t);i>0&&n.push({id:r,data:{droppableContainer:e,value:i}})}}return n.sort(A)};function S(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:I}let C=function(e){return function(t){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return r.reduce((t,i)=>({...t,top:t.top+e*i.y,bottom:t.bottom+e*i.y,left:t.left+e*i.x,right:t.right+e*i.x}),{...t})}}(1),R={ignoreTransform:!1};function B(e,t){void 0===t&&(t=R);let i=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=(0,g.zk)(e).getComputedStyle(e);t&&(i=function(e,t,i){let r=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;let{scaleX:n,scaleY:a,x:s,y:o}=r,l=e.left-s-(1-n)*parseFloat(i),u=e.top-o-(1-a)*parseFloat(i.slice(i.indexOf(" ")+1)),c=n?e.width/n:e.width,h=a?e.height/a:e.height;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l}}(i,t,r))}let{top:r,left:n,width:a,height:s,bottom:o,right:l}=i;return{top:r,left:n,width:a,height:s,bottom:o,right:l}}function M(e){return B(e,{ignoreTransform:!0})}function L(e,t){let i=[];return e?function r(n){var a;if(null!=t&&i.length>=t||!n)return i;if((0,g.wz)(n)&&null!=n.scrollingElement&&!i.includes(n.scrollingElement))return i.push(n.scrollingElement),i;if(!(0,g.sb)(n)||(0,g.xZ)(n)||i.includes(n))return i;let s=(0,g.zk)(e).getComputedStyle(n);return(n!==e&&function(e,t){void 0===t&&(t=(0,g.zk)(e).getComputedStyle(e));let i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&i.test(r)})}(n,s)&&i.push(n),void 0===(a=s)&&(a=(0,g.zk)(n).getComputedStyle(n)),"fixed"===a.position)?i:r(n.parentNode)}(e):i}function D(e){let[t]=L(e,1);return null!=t?t:null}function O(e){return g.Sw&&e?(0,g.l6)(e)?e:(0,g.Ll)(e)?(0,g.wz)(e)||e===(0,g.TW)(e).scrollingElement?window:(0,g.sb)(e)?e:null:null:null}function N(e){return(0,g.l6)(e)?e.scrollX:e.scrollLeft}function z(e){return(0,g.l6)(e)?e.scrollY:e.scrollTop}function P(e){return{x:N(e),y:z(e)}}function U(e){return!!g.Sw&&!!e&&e===document.scrollingElement}function F(e){let t={x:0,y:0},i=U(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-i.width,y:e.scrollHeight-i.height},n=e.scrollTop<=t.y;return{isTop:n,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(a||(a={}));let G={x:.2,y:.2};function X(e){return e.reduce((e,t)=>(0,g.WQ)(e,P(t)),I)}let W=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+N(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+z(t),0)}]];class q{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let i=L(t),r=X(i);for(let[t,n,a]of(this.rect={...e},this.width=e.width,this.height=e.height,W))for(let e of n)Object.defineProperty(this,e,{get:()=>{let n=a(i),s=r[t]-n;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ${constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,i){var r;null==(r=this.target)||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function j(e,t){let i=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(i**2+r**2)>t:"x"in t&&"y"in t?i>t.x&&r>t.y:"x"in t?i>t.x:"y"in t&&r>t.y}function Y(e){e.preventDefault()}function H(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(s||(s={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(o||(o={}));let K={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},V=(e,t)=>{let{currentCoordinates:i}=t;switch(e.code){case o.Right:return{...i,x:i.x+25};case o.Left:return{...i,x:i.x-25};case o.Down:return{...i,y:i.y+25};case o.Up:return{...i,y:i.y-25}}};class Z{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new $((0,g.TW)(t)),this.windowListeners=new $((0,g.zk)(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(s.Resize,this.handleCancel),this.windowListeners.add(s.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(s.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&function(e,t){if(void 0===t&&(t=B),!e)return;let{top:i,left:r,bottom:n,right:a}=t(e);D(e)&&(n<=0||a<=0||i>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(i),t(I)}handleKeyDown(e){if((0,g.kx)(e)){let{active:t,context:i,options:r}=this.props,{keyboardCodes:n=K,coordinateGetter:a=V,scrollBehavior:s="smooth"}=r,{code:l}=e;if(n.end.includes(l)){this.handleEnd(e);return}if(n.cancel.includes(l)){this.handleCancel(e);return}let{collisionRect:u}=i.current,c=u?{x:u.left,y:u.top}:I;this.referenceCoordinates||(this.referenceCoordinates=c);let h=a(e,{active:t,context:i.current,currentCoordinates:c});if(h){let t=(0,g.Re)(h,c),r={x:0,y:0},{scrollableAncestors:n}=i.current;for(let i of n){let n=e.code,{isTop:a,isRight:l,isLeft:u,isBottom:c,maxScroll:f,minScroll:d}=F(i),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:i,right:r,bottom:n}=e.getBoundingClientRect();return{top:t,left:i,right:r,bottom:n,width:e.clientWidth,height:e.clientHeight}}(i),m={x:Math.min(n===o.Right?p.right-p.width/2:p.right,Math.max(n===o.Right?p.left:p.left+p.width/2,h.x)),y:Math.min(n===o.Down?p.bottom-p.height/2:p.bottom,Math.max(n===o.Down?p.top:p.top+p.height/2,h.y))},g=n===o.Right&&!l||n===o.Left&&!u,y=n===o.Down&&!c||n===o.Up&&!a;if(g&&m.x!==h.x){let e=i.scrollLeft+t.x,a=n===o.Right&&e<=f.x||n===o.Left&&e>=d.x;if(a&&!t.y){i.scrollTo({left:e,behavior:s});return}a?r.x=i.scrollLeft-e:r.x=n===o.Right?i.scrollLeft-f.x:i.scrollLeft-d.x,r.x&&i.scrollBy({left:-r.x,behavior:s});break}if(y&&m.y!==h.y){let e=i.scrollTop+t.y,a=n===o.Down&&e<=f.y||n===o.Up&&e>=d.y;if(a&&!t.x){i.scrollTo({top:e,behavior:s});return}a?r.y=i.scrollTop-e:r.y=n===o.Down?i.scrollTop-f.y:i.scrollTop-d.y,r.y&&i.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,(0,g.WQ)((0,g.Re)(h,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function J(e){return!!(e&&"distance"in e)}function Q(e){return!!(e&&"delay"in e)}Z.activators=[{eventName:"onKeyDown",handler:(e,t,i)=>{let{keyboardCodes:r=K,onActivation:n}=t,{active:a}=i,{code:s}=e.nativeEvent;if(r.start.includes(s)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class ee{constructor(e,t,i){var r;void 0===i&&(i=function(e){let{EventTarget:t}=(0,g.zk)(e);return e instanceof t?e:(0,g.TW)(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:n}=e,{target:a}=n;this.props=e,this.events=t,this.document=(0,g.TW)(a),this.documentListeners=new $(this.document),this.listeners=new $(i),this.windowListeners=new $((0,g.zk)(a)),this.initialCoordinates=null!=(r=(0,g.e_)(n))?r:I,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(s.Resize,this.handleCancel),this.windowListeners.add(s.DragStart,Y),this.windowListeners.add(s.VisibilityChange,this.handleCancel),this.windowListeners.add(s.ContextMenu,Y),this.documentListeners.add(s.Keydown,this.handleKeydown),t){if(null!=i&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Q(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(J(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(s.Click,H,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(s.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:i,initialCoordinates:r,props:n}=this,{onMove:a,options:{activationConstraint:s}}=n;if(!r)return;let o=null!=(t=(0,g.e_)(e))?t:I,l=(0,g.Re)(r,o);if(!i&&s){if(J(s)){if(null!=s.tolerance&&j(l,s.tolerance))return this.handleCancel();if(j(l,s.distance))return this.handleStart()}return Q(s)&&j(l,s.tolerance)?this.handleCancel():void this.handlePending(s,l)}e.cancelable&&e.preventDefault(),a(o)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===o.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let et={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ei extends ee{constructor(e){let{event:t}=e;super(e,et,(0,g.TW)(t.target))}}ei.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:r}=t;return!!i.isPrimary&&0===i.button&&(null==r||r({event:i}),!0)}}];let er={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(l||(l={}));class en extends ee{constructor(e){super(e,er,(0,g.TW)(e.event.target))}}en.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:r}=t;return i.button!==l.RightClick&&(null==r||r({event:i}),!0)}}];let ea={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class es extends ee{constructor(e){super(e,ea)}static setup(){return window.addEventListener(ea.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ea.move.name,e)};function e(){}}}es.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:i}=e,{onActivation:r}=t,{touches:n}=i;return!(n.length>1)&&(null==r||r({event:i}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(u||(u={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(c||(c={}));let eo={x:{[a.Backward]:!1,[a.Forward]:!1},y:{[a.Backward]:!1,[a.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(h||(h={})),(f||(f={})).Optimized="optimized";let el=new Map;function eu(e,t){return(0,g.KG)(i=>e?i||("function"==typeof t?t(e):e):null,[t,e])}function ec(e){let{callback:t,disabled:i}=e,r=(0,g._q)(t),n=(0,p.useMemo)(()=>{if(i||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[i]);return(0,p.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function eh(e){return new q(B(e),e)}function ef(e,t,i){void 0===t&&(t=eh);let[r,n]=(0,p.useState)(null);function a(){n(r=>{if(!e)return null;if(!1===e.isConnected){var n;return null!=(n=null!=r?r:i)?n:null}let a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a})}let s=function(e){let{callback:t,disabled:i}=e,r=(0,g._q)(t),n=(0,p.useMemo)(()=>{if(i||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,i]);return(0,p.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(let i of t){let{type:t,target:r}=i;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),o=ec({callback:a});return(0,g.Es)(()=>{a(),e?(null==o||o.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==o||o.disconnect(),null==s||s.disconnect())},[e]),r}let ed=[];function ep(e,t){void 0===t&&(t=[]);let i=(0,p.useRef)(null);return(0,p.useEffect)(()=>{i.current=null},t),(0,p.useEffect)(()=>{let t=e!==I;t&&!i.current&&(i.current=e),!t&&i.current&&(i.current=null)},[e]),i.current?(0,g.Re)(e,i.current):I}function em(e){return(0,p.useMemo)(()=>e?function(e){let t=e.innerWidth,i=e.innerHeight;return{top:0,left:0,right:t,bottom:i,width:t,height:i}}(e):null,[e])}let eg=[],ey=[{sensor:ei,options:{}},{sensor:Z,options:{}}],eb={current:{}},ew={draggable:{measure:M},droppable:{measure:M,strategy:h.WhileDragging,frequency:f.Optimized},dragOverlay:{measure:B}};class ev extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return null!=(t=null==(i=this.get(e))?void 0:i.node.current)?t:void 0}}let e_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ev,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:k},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ew,measureDroppableContainers:k,windowRect:null,measuringScheduled:!1},eT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:k,draggableNodes:new Map,over:null,measureDroppableContainers:k},ex=(0,p.createContext)(eT),ek=(0,p.createContext)(e_);function eI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ev}}}function eA(e,t){switch(t.type){case n.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case n.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case n.DragEnd:case n.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case n.RegisterDroppable:{let{element:i}=t,{id:r}=i,n=new ev(e.droppable.containers);return n.set(r,i),{...e,droppable:{...e.droppable,containers:n}}}case n.SetDroppableDisabled:{let{id:i,key:r,disabled:n}=t,a=e.droppable.containers.get(i);if(!a||r!==a.key)return e;let s=new ev(e.droppable.containers);return s.set(i,{...a,disabled:n}),{...e,droppable:{...e.droppable,containers:s}}}case n.UnregisterDroppable:{let{id:i,key:r}=t,n=e.droppable.containers.get(i);if(!n||r!==n.key)return e;let a=new ev(e.droppable.containers);return a.delete(i),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function eE(e){let{disabled:t}=e,{active:i,activatorEvent:r,draggableNodes:n}=(0,p.useContext)(ex),a=(0,g.ZC)(r),s=(0,g.ZC)(null==i?void 0:i.id);return(0,p.useEffect)(()=>{if(!t&&!r&&a&&null!=s){if(!(0,g.kx)(a)||document.activeElement===a.target)return;let e=n.get(s);if(!e)return;let{activatorNode:t,node:i}=e;(t.current||i.current)&&requestAnimationFrame(()=>{for(let e of[t.current,i.current]){if(!e)continue;let t=(0,g.ag)(e);if(t){t.focus();break}}})}},[r,t,n,s,a]),null}let eS=(0,p.createContext)({...I,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(d||(d={}));let eC=(0,p.memo)(function(e){var t,i,r,s,o,l;let{id:f,accessibility:y,autoScroll:b=!0,children:w,sensors:_=ey,collisionDetection:T=E,measuring:k,modifiers:A,...R}=e,[M,N]=(0,p.useReducer)(eA,void 0,eI),[z,W]=function(){let[e]=(0,p.useState)(()=>new Set),t=(0,p.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,p.useCallback)(t=>{let{type:i,event:r}=t;e.forEach(e=>{var t;return null==(t=e[i])?void 0:t.call(e,r)})},[e]),t]}(),[$,j]=(0,p.useState)(d.Uninitialized),Y=$===d.Initialized,{draggable:{active:H,nodes:K,translate:V},droppable:{containers:Z}}=M,J=null!=H?K.get(H):null,Q=(0,p.useRef)({initial:null,translated:null}),ee=(0,p.useMemo)(()=>{var e;return null!=H?{id:H,data:null!=(e=null==J?void 0:J.data)?e:eb,rect:Q}:null},[H,J]),et=(0,p.useRef)(null),[ei,er]=(0,p.useState)(null),[en,ea]=(0,p.useState)(null),es=(0,g.YN)(R,Object.values(R)),eh=(0,g.YG)("DndDescribedBy",f),ev=(0,p.useMemo)(()=>Z.getEnabled(),[Z]),e_=(0,p.useMemo)(()=>({draggable:{...ew.draggable,...null==k?void 0:k.draggable},droppable:{...ew.droppable,...null==k?void 0:k.droppable},dragOverlay:{...ew.dragOverlay,...null==k?void 0:k.dragOverlay}}),[null==k?void 0:k.draggable,null==k?void 0:k.droppable,null==k?void 0:k.dragOverlay]),{droppableRects:eT,measureDroppableContainers:eC,measuringScheduled:eR}=function(e,t){let{dragging:i,dependencies:r,config:n}=t,[a,s]=(0,p.useState)(null),{frequency:o,measure:l,strategy:u}=n,c=(0,p.useRef)(e),f=function(){switch(u){case h.Always:return!1;case h.BeforeDragging:return i;default:return!i}}(),d=(0,g.YN)(f),m=(0,p.useCallback)(function(e){void 0===e&&(e=[]),d.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[d]),y=(0,p.useRef)(null),b=(0,g.KG)(t=>{if(f&&!i)return el;if(!t||t===el||c.current!==e||null!=a){let t=new Map;for(let i of e){if(!i)continue;if(a&&a.length>0&&!a.includes(i.id)&&i.rect.current){t.set(i.id,i.rect.current);continue}let e=i.node.current,r=e?new q(l(e),e):null;i.rect.current=r,r&&t.set(i.id,r)}return t}return t},[e,a,i,f,l]);return(0,p.useEffect)(()=>{c.current=e},[e]),(0,p.useEffect)(()=>{f||m()},[i,f]),(0,p.useEffect)(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),(0,p.useEffect)(()=>{f||"number"!=typeof o||null!==y.current||(y.current=setTimeout(()=>{m(),y.current=null},o))},[o,f,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:null!=a}}(ev,{dragging:Y,dependencies:[V.x,V.y],config:e_.droppable}),eB=function(e,t){let i=null!=t?e.get(t):void 0,r=i?i.node.current:null;return(0,g.KG)(e=>{var i;return null==t?null:null!=(i=null!=r?r:e)?i:null},[r,t])}(K,H),eM=(0,p.useMemo)(()=>en?(0,g.e_)(en):null,[en]),eL=function(){let e=(null==ei?void 0:ei.autoScrollEnabled)===!1,t="object"==typeof b?!1===b.enabled:!1===b,i=Y&&!e&&!t;return"object"==typeof b?{...b,enabled:i}:{enabled:i}}(),eD=eu(eB,e_.draggable.measure);!function(e){let{activeNode:t,measure:i,initialRect:r,config:n=!0}=e,a=(0,p.useRef)(!1),{x:s,y:o}="boolean"==typeof n?{x:n,y:n}:n;(0,g.Es)(()=>{if(!s&&!o||!t){a.current=!1;return}if(a.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let n=S(i(e),r);if(s||(n.x=0),o||(n.y=0),a.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){let t=D(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,s,o,r,i])}({activeNode:null!=H?K.get(H):null,config:eL.layoutShiftCompensation,initialRect:eD,measure:e_.draggable.measure});let eO=ef(eB,e_.draggable.measure,eD),eN=ef(eB?eB.parentElement:null),ez=(0,p.useRef)({activatorEvent:null,active:null,activeNode:eB,collisionRect:null,collisions:null,droppableRects:eT,draggableNodes:K,draggingNode:null,draggingNodeRect:null,droppableContainers:Z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eP=Z.getNodeFor(null==(t=ez.current.over)?void 0:t.id),eU=function(e){let{measure:t}=e,[i,r]=(0,p.useState)(null),n=ec({callback:(0,p.useCallback)(e=>{for(let{target:i}of e)if((0,g.sb)(i)){r(e=>{let r=t(i);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),a=(0,p.useCallback)(e=>{let i=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return(0,g.sb)(t)?t:e}(e);null==n||n.disconnect(),i&&(null==n||n.observe(i)),r(i?t(i):null)},[t,n]),[s,o]=(0,g.lk)(a);return(0,p.useMemo)(()=>({nodeRef:s,rect:i,setRef:o}),[i,s,o])}({measure:e_.dragOverlay.measure}),eF=null!=(i=eU.nodeRef.current)?i:eB,eG=Y?null!=(r=eU.rect)?r:eO:null,eX=!!(eU.nodeRef.current&&eU.rect),eW=function(e){let t=eu(e);return S(e,t)}(eX?null:eO),eq=em(eF?(0,g.zk)(eF):null),e$=function(e){let t=(0,p.useRef)(e),i=(0,g.KG)(i=>e?i&&i!==ed&&e&&t.current&&e.parentNode===t.current.parentNode?i:L(e):ed,[e]);return(0,p.useEffect)(()=>{t.current=e},[e]),i}(Y?null!=eP?eP:eB:null),ej=function(e,t){void 0===t&&(t=B);let[i]=e,r=em(i?(0,g.zk)(i):null),[n,a]=(0,p.useState)(eg);function s(){a(()=>e.length?e.map(e=>U(e)?r:new q(t(e),e)):eg)}let o=ec({callback:s});return(0,g.Es)(()=>{null==o||o.disconnect(),s(),e.forEach(e=>null==o?void 0:o.observe(e))},[e]),n}(e$),eY=function(e,t){let{transform:i,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),i):i}(A,{transform:{x:V.x-eW.x,y:V.y-eW.y,scaleX:1,scaleY:1},activatorEvent:en,active:ee,activeNodeRect:eO,containerNodeRect:eN,draggingNodeRect:eG,over:ez.current.over,overlayNodeRect:eU.rect,scrollableAncestors:e$,scrollableAncestorRects:ej,windowRect:eq}),eH=eM?(0,g.WQ)(eM,V):null,eK=function(e){let[t,i]=(0,p.useState)(null),r=(0,p.useRef)(e),n=(0,p.useCallback)(e=>{let t=O(e.target);t&&i(e=>e?(e.set(t,P(t)),new Map(e)):null)},[]);return(0,p.useEffect)(()=>{let t=r.current;if(e!==t){a(t);let s=e.map(e=>{let t=O(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,P(t)]):null}).filter(e=>null!=e);i(s.length?new Map(s):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=O(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,p.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>(0,g.WQ)(e,t),I):X(e):I,[e,t])}(e$),eV=ep(eK),eZ=ep(eK,[eO]),eJ=(0,g.WQ)(eY,eV),eQ=eG?C(eG,eY):null,e0=ee&&eQ?T({active:ee,collisionRect:eQ,droppableRects:eT,droppableContainers:ev,pointerCoordinates:eH}):null,e1=function(e,t){if(!e||0===e.length)return null;let[i]=e;return i.id}(e0,0),[e2,e3]=(0,p.useState)(null),e6=(o=eX?eY:(0,g.WQ)(eY,eZ),l=null!=(s=null==e2?void 0:e2.rect)?s:null,{...o,scaleX:l&&eO?l.width/eO.width:1,scaleY:l&&eO?l.height/eO.height:1}),e8=(0,p.useRef)(null),e5=(0,p.useCallback)((e,t)=>{let{sensor:i,options:r}=t;if(null==et.current)return;let a=K.get(et.current);if(!a)return;let s=e.nativeEvent,o=new i({active:et.current,activeNode:a,event:s,options:r,context:ez,onAbort(e){if(!K.get(e))return;let{onDragAbort:t}=es.current,i={id:e};null==t||t(i),z({type:"onDragAbort",event:i})},onPending(e,t,i,r){if(!K.get(e))return;let{onDragPending:n}=es.current,a={id:e,constraint:t,initialCoordinates:i,offset:r};null==n||n(a),z({type:"onDragPending",event:a})},onStart(e){let t=et.current;if(null==t)return;let i=K.get(t);if(!i)return;let{onDragStart:r}=es.current,a={activatorEvent:s,active:{id:t,data:i.data,rect:Q}};(0,m.unstable_batchedUpdates)(()=>{null==r||r(a),j(d.Initializing),N({type:n.DragStart,initialCoordinates:e,active:t}),z({type:"onDragStart",event:a}),er(e8.current),ea(s)})},onMove(e){N({type:n.DragMove,coordinates:e})},onEnd:l(n.DragEnd),onCancel:l(n.DragCancel)});function l(e){return async function(){let{active:t,collisions:i,over:r,scrollAdjustedTranslate:a}=ez.current,o=null;if(t&&a){let{cancelDrop:l}=es.current;o={activatorEvent:s,active:t,collisions:i,delta:a,over:r},e===n.DragEnd&&"function"==typeof l&&await Promise.resolve(l(o))&&(e=n.DragCancel)}et.current=null,(0,m.unstable_batchedUpdates)(()=>{N({type:e}),j(d.Uninitialized),e3(null),er(null),ea(null),e8.current=null;let t=e===n.DragEnd?"onDragEnd":"onDragCancel";if(o){let e=es.current[t];null==e||e(o),z({type:t,event:o})}})}}e8.current=o},[K]),e4=(0,p.useCallback)((e,t)=>(i,r)=>{let n=i.nativeEvent,a=K.get(r);null!==et.current||!a||n.dndKit||n.defaultPrevented||!0!==e(i,t.options,{active:a})||(n.dndKit={capturedBy:t.sensor},et.current=r,e5(i,t))},[K,e5]),e7=(0,p.useMemo)(()=>_.reduce((e,t)=>{let{sensor:i}=t;return[...e,...i.activators.map(e=>({eventName:e.eventName,handler:e4(e.handler,t)}))]},[]),[_,e4]);(0,p.useEffect)(()=>{if(!g.Sw)return;let e=_.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},_.map(e=>{let{sensor:t}=e;return t})),(0,g.Es)(()=>{eO&&$===d.Initializing&&j(d.Initialized)},[eO,$]),(0,p.useEffect)(()=>{let{onDragMove:e}=es.current,{active:t,activatorEvent:i,collisions:r,over:n}=ez.current;if(!t||!i)return;let a={active:t,activatorEvent:i,collisions:r,delta:{x:eJ.x,y:eJ.y},over:n};(0,m.unstable_batchedUpdates)(()=>{null==e||e(a),z({type:"onDragMove",event:a})})},[eJ.x,eJ.y]),(0,p.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:i,droppableContainers:r,scrollAdjustedTranslate:n}=ez.current;if(!e||null==et.current||!t||!n)return;let{onDragOver:a}=es.current,s=r.get(e1),o=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,l={active:e,activatorEvent:t,collisions:i,delta:{x:n.x,y:n.y},over:o};(0,m.unstable_batchedUpdates)(()=>{e3(o),null==a||a(l),z({type:"onDragOver",event:l})})},[e1]),(0,g.Es)(()=>{ez.current={activatorEvent:en,active:ee,activeNode:eB,collisionRect:eQ,collisions:e0,droppableRects:eT,draggableNodes:K,draggingNode:eF,draggingNodeRect:eG,droppableContainers:Z,over:e2,scrollableAncestors:e$,scrollAdjustedTranslate:eJ},Q.current={initial:eG,translated:eQ}},[ee,eB,e0,eQ,K,eF,eG,eT,Z,e2,e$,eJ]),function(e){let{acceleration:t,activator:i=u.Pointer,canScroll:r,draggingRect:n,enabled:s,interval:o=5,order:l=c.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:d,delta:m,threshold:y}=e,b=function(e){let{delta:t,disabled:i}=e,r=(0,g.ZC)(t);return(0,g.KG)(e=>{if(i||!r||!e)return eo;let n={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[a.Backward]:e.x[a.Backward]||-1===n.x,[a.Forward]:e.x[a.Forward]||1===n.x},y:{[a.Backward]:e.y[a.Backward]||-1===n.y,[a.Forward]:e.y[a.Forward]||1===n.y}}},[i,t,r])}({delta:m,disabled:!s}),[w,v]=(0,g.$$)(),_=(0,p.useRef)({x:0,y:0}),T=(0,p.useRef)({x:0,y:0}),x=(0,p.useMemo)(()=>{switch(i){case u.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case u.DraggableRect:return n}},[i,n,h]),k=(0,p.useRef)(null),I=(0,p.useCallback)(()=>{let e=k.current;if(!e)return;let t=_.current.x*T.current.x,i=_.current.y*T.current.y;e.scrollBy(t,i)},[]),A=(0,p.useMemo)(()=>l===c.TreeOrder?[...f].reverse():f,[l,f]);(0,p.useEffect)(()=>{if(!s||!f.length||!x){v();return}for(let e of A){if((null==r?void 0:r(e))===!1)continue;let i=d[f.indexOf(e)];if(!i)continue;let{direction:n,speed:s}=function(e,t,i,r,n){let{top:s,left:o,right:l,bottom:u}=i;void 0===r&&(r=10),void 0===n&&(n=G);let{isTop:c,isBottom:h,isLeft:f,isRight:d}=F(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*n.y,width:t.width*n.x};return!c&&s<=t.top+g.height?(p.y=a.Backward,m.y=r*Math.abs((t.top+g.height-s)/g.height)):!h&&u>=t.bottom-g.height&&(p.y=a.Forward,m.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!d&&l>=t.right-g.width?(p.x=a.Forward,m.x=r*Math.abs((t.right-g.width-l)/g.width)):!f&&o<=t.left+g.width&&(p.x=a.Backward,m.x=r*Math.abs((t.left+g.width-o)/g.width)),{direction:p,speed:m}}(e,i,x,t,y);for(let e of["x","y"])b[e][n[e]]||(s[e]=0,n[e]=0);if(s.x>0||s.y>0){v(),k.current=e,w(I,o),_.current=s,T.current=n;return}}_.current={x:0,y:0},T.current={x:0,y:0},v()},[t,I,r,v,s,o,JSON.stringify(x),JSON.stringify(b),w,f,A,d,JSON.stringify(y)])}({...eL,delta:V,draggingRect:eQ,pointerCoordinates:eH,scrollableAncestors:e$,scrollableAncestorRects:ej});let e9=(0,p.useMemo)(()=>({active:ee,activeNode:eB,activeNodeRect:eO,activatorEvent:en,collisions:e0,containerNodeRect:eN,dragOverlay:eU,draggableNodes:K,droppableContainers:Z,droppableRects:eT,over:e2,measureDroppableContainers:eC,scrollableAncestors:e$,scrollableAncestorRects:ej,measuringConfiguration:e_,measuringScheduled:eR,windowRect:eq}),[ee,eB,eO,en,e0,eN,eU,K,Z,eT,e2,eC,e$,ej,e_,eR,eq]),te=(0,p.useMemo)(()=>({activatorEvent:en,activators:e7,active:ee,activeNodeRect:eO,ariaDescribedById:{draggable:eh},dispatch:N,draggableNodes:K,over:e2,measureDroppableContainers:eC}),[en,e7,ee,eO,N,eh,K,e2,eC]);return p.createElement(v.Provider,{value:W},p.createElement(ex.Provider,{value:te},p.createElement(ek.Provider,{value:e9},p.createElement(eS.Provider,{value:e6},w)),p.createElement(eE,{disabled:(null==y?void 0:y.restoreFocus)===!1})),p.createElement(x,{...y,hiddenTextDescribedById:eh}))}),eR=(0,p.createContext)(null),eB="button";function eM(e){let{id:t,data:i,disabled:r=!1,attributes:n}=e,a=(0,g.YG)("Draggable"),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:h,over:f}=(0,p.useContext)(ex),{role:d=eB,roleDescription:m="draggable",tabIndex:y=0}=null!=n?n:{},b=(null==l?void 0:l.id)===t,w=(0,p.useContext)(b?eS:eR),[v,_]=(0,g.lk)(),[T,x]=(0,g.lk)(),k=(0,p.useMemo)(()=>s.reduce((e,i)=>{let{eventName:r,handler:n}=i;return e[r]=e=>{n(e,t)},e},{}),[s,t]),I=(0,g.YN)(i);return(0,g.Es)(()=>(h.set(t,{id:t,key:a,node:v,activatorNode:T,data:I}),()=>{let e=h.get(t);e&&e.key===a&&h.delete(t)}),[h,t]),{active:l,activatorEvent:o,activeNodeRect:u,attributes:(0,p.useMemo)(()=>({role:d,tabIndex:y,"aria-disabled":r,"aria-pressed":!!b&&d===eB||void 0,"aria-roledescription":m,"aria-describedby":c.draggable}),[r,d,y,b,m,c.draggable]),isDragging:b,listeners:r?void 0:k,node:v,over:f,setNodeRef:_,setActivatorNodeRef:x,transform:w}}function eL(){return(0,p.useContext)(ek)}let eD={timeout:25};function eO(e){let{data:t,disabled:i=!1,id:r,resizeObserverConfig:a}=e,s=(0,g.YG)("Droppable"),{active:o,dispatch:l,over:u,measureDroppableContainers:c}=(0,p.useContext)(ex),h=(0,p.useRef)({disabled:i}),f=(0,p.useRef)(!1),d=(0,p.useRef)(null),m=(0,p.useRef)(null),{disabled:y,updateMeasurementsFor:b,timeout:w}={...eD,...a},v=(0,g.YN)(null!=b?b:r),_=ec({callback:(0,p.useCallback)(()=>{if(!f.current){f.current=!0;return}null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),m.current=null},w)},[w]),disabled:y||!o}),T=(0,p.useCallback)((e,t)=>{_&&(t&&(_.unobserve(t),f.current=!1),e&&_.observe(e))},[_]),[x,k]=(0,g.lk)(T),I=(0,g.YN)(t);return(0,p.useEffect)(()=>{_&&x.current&&(_.disconnect(),f.current=!1,_.observe(x.current))},[x,_]),(0,p.useEffect)(()=>(l({type:n.RegisterDroppable,element:{id:r,key:s,disabled:i,node:x,rect:d,data:I}}),()=>l({type:n.UnregisterDroppable,key:s,id:r})),[r]),(0,p.useEffect)(()=>{i!==h.current.disabled&&(l({type:n.SetDroppableDisabled,id:r,key:s,disabled:i}),h.current.disabled=i)},[r,s,i,l]),{active:o,rect:d,isOver:(null==u?void 0:u.id)===r,node:x,over:u,setNodeRef:k}}r={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:i}=e,n={},{styles:a,className:s}=r;if(null!=a&&a.active)for(let[e,i]of Object.entries(a.active))void 0!==i&&(n[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,i));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&i.node.style.setProperty(e,t);return null!=s&&s.active&&t.node.classList.add(s.active),null!=s&&s.dragOverlay&&i.node.classList.add(s.dragOverlay),function(){for(let[e,i]of Object.entries(n))t.node.style.setProperty(e,i);null!=s&&s.active&&t.node.classList.remove(s.active)}}},8279:(e,t,i)=>{"use strict";i.d(t,{be:()=>s,gB:()=>h,gl:()=>b});var r=i(9444),n=i(2976),a=i(2400);function s(e,t,i){let r=e.slice();return r.splice(i<0?r.length+i:i,0,r.splice(t,1)[0]),r}function o(e){return null!==e&&e>=0}let l=e=>{let{rects:t,activeIndex:i,overIndex:r,index:n}=e,a=s(t,r,i),o=t[n],l=a[n];return l&&o?{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}:null},u="Sortable",c=r.createContext({activeIndex:-1,containerId:u,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:l,disabled:{draggable:!1,droppable:!1}});function h(e){let{children:t,id:i,items:s,strategy:o=l,disabled:h=!1}=e,{active:f,dragOverlay:d,droppableRects:p,over:m,measureDroppableContainers:g}=(0,n.fF)(),y=(0,a.YG)(u,i),b=null!==d.rect,w=(0,r.useMemo)(()=>s.map(e=>"object"==typeof e&&"id"in e?e.id:e),[s]),v=null!=f,_=f?w.indexOf(f.id):-1,T=m?w.indexOf(m.id):-1,x=(0,r.useRef)(w),k=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(w,x.current),I=-1!==T&&-1===_||k,A="boolean"==typeof h?{draggable:h,droppable:h}:h;(0,a.Es)(()=>{k&&v&&g(w)},[k,w,v,g]),(0,r.useEffect)(()=>{x.current=w},[w]);let E=(0,r.useMemo)(()=>({activeIndex:_,containerId:y,disabled:A,disableTransforms:I,items:w,overIndex:T,useDragOverlay:b,sortedRects:w.reduce((e,t,i)=>{let r=p.get(t);return r&&(e[i]=r),e},Array(w.length)),strategy:o}),[_,y,A.draggable,A.droppable,I,w,T,p,b,o]);return r.createElement(c.Provider,{value:E},t)}let f=e=>{let{id:t,items:i,activeIndex:r,overIndex:n}=e;return s(i,r,n).indexOf(t)},d=e=>{let{containerId:t,isSorting:i,wasDragging:r,index:n,items:a,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!!u&&!!r&&(o===a||n!==s)&&(!!i||s!==n&&t===l)},p={duration:200,easing:"ease"},m="transform",g=a.Ks.Transition.toString({property:m,duration:0,easing:"linear"}),y={roleDescription:"sortable"};function b(e){var t,i;let{animateLayoutChanges:s=d,attributes:l,disabled:u,data:h,getNewIndex:b=f,id:w,strategy:v,resizeObserverConfig:_,transition:T=p}=e,{items:x,containerId:k,activeIndex:I,disabled:A,disableTransforms:E,sortedRects:S,overIndex:C,useDragOverlay:R,strategy:B}=(0,r.useContext)(c),M="boolean"==typeof u?{draggable:u,droppable:!1}:{draggable:null!=(t=null==u?void 0:u.draggable)?t:A.draggable,droppable:null!=(i=null==u?void 0:u.droppable)?i:A.droppable},L=x.indexOf(w),D=(0,r.useMemo)(()=>({sortable:{containerId:k,index:L,items:x},...h}),[k,h,L,x]),O=(0,r.useMemo)(()=>x.slice(x.indexOf(w)),[x,w]),{rect:N,node:z,isOver:P,setNodeRef:U}=(0,n.zM)({id:w,data:D,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:O,..._}}),{active:F,activatorEvent:G,activeNodeRect:X,attributes:W,setNodeRef:q,listeners:$,isDragging:j,over:Y,setActivatorNodeRef:H,transform:K}=(0,n.PM)({id:w,data:D,attributes:{...y,...l},disabled:M.draggable}),V=(0,a.jn)(U,q),Z=!!F,J=Z&&!E&&o(I)&&o(C),Q=!R&&j,ee=Q&&J?K:null,et=J?null!=ee?ee:(null!=v?v:B)({rects:S,activeNodeRect:X,activeIndex:I,overIndex:C,index:L}):null,ei=o(I)&&o(C)?b({id:w,items:x,activeIndex:I,overIndex:C}):L,er=null==F?void 0:F.id,en=(0,r.useRef)({activeId:er,items:x,newIndex:ei,containerId:k}),ea=x!==en.current.items,es=s({active:F,containerId:k,isDragging:j,isSorting:Z,id:w,index:L,items:x,newIndex:en.current.newIndex,previousItems:en.current.items,previousContainerId:en.current.containerId,transition:T,wasDragging:null!=en.current.activeId}),eo=function(e){let{disabled:t,index:i,node:s,rect:o}=e,[l,u]=(0,r.useState)(null),c=(0,r.useRef)(i);return(0,a.Es)(()=>{if(!t&&i!==c.current&&s.current){let e=o.current;if(e){let t=(0,n.Sj)(s.current,{ignoreTransform:!0}),i={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(i.x||i.y)&&u(i)}}i!==c.current&&(c.current=i)},[t,i,s,o]),(0,r.useEffect)(()=>{l&&u(null)},[l]),l}({disabled:!es,index:L,node:z,rect:N});return(0,r.useEffect)(()=>{Z&&en.current.newIndex!==ei&&(en.current.newIndex=ei),k!==en.current.containerId&&(en.current.containerId=k),x!==en.current.items&&(en.current.items=x)},[Z,ei,k,x]),(0,r.useEffect)(()=>{if(er===en.current.activeId)return;if(null!=er&&null==en.current.activeId){en.current.activeId=er;return}let e=setTimeout(()=>{en.current.activeId=er},50);return()=>clearTimeout(e)},[er]),{active:F,activeIndex:I,attributes:W,data:D,rect:N,index:L,newIndex:ei,items:x,isOver:P,isSorting:Z,isDragging:j,listeners:$,node:z,overIndex:C,over:Y,setNodeRef:V,setActivatorNodeRef:H,setDroppableNodeRef:U,setDraggableNodeRef:q,transform:null!=eo?eo:et,transition:eo||ea&&en.current.newIndex===L?g:(!Q||(0,a.kx)(G))&&T&&(Z||es)?a.Ks.Transition.toString({...T,property:m}):void 0}}n.vL.Down,n.vL.Right,n.vL.Up,n.vL.Left},2400:(e,t,i)=>{"use strict";i.d(t,{$$:()=>m,Es:()=>d,KG:()=>y,Ks:()=>E,Ll:()=>o,Re:()=>k,Sw:()=>a,TW:()=>f,WQ:()=>x,YG:()=>_,YN:()=>g,ZC:()=>w,_q:()=>p,ag:()=>C,e_:()=>A,jn:()=>n,kx:()=>I,l6:()=>s,lk:()=>b,sb:()=>c,wz:()=>u,xZ:()=>h,zk:()=>l});var r=i(9444);function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}let a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function s(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function o(e){return"nodeType"in e}function l(e){var t,i;return e?s(e)?e:o(e)&&null!=(t=null==(i=e.ownerDocument)?void 0:i.defaultView)?t:window:window}function u(e){let{Document:t}=l(e);return e instanceof t}function c(e){return!s(e)&&e instanceof l(e).HTMLElement}function h(e){return e instanceof l(e).SVGElement}function f(e){return e?s(e)?e.document:o(e)?u(e)?e:c(e)||h(e)?e.ownerDocument:document:document:document}let d=a?r.useLayoutEffect:r.useEffect;function p(e){let t=(0,r.useRef)(e);return d(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return null==t.current?void 0:t.current(...i)},[])}function m(){let e=(0,r.useRef)(null);return[(0,r.useCallback)((t,i)=>{e.current=setInterval(t,i)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function g(e,t){void 0===t&&(t=[e]);let i=(0,r.useRef)(e);return d(()=>{i.current!==e&&(i.current=e)},t),i}function y(e,t){let i=(0,r.useRef)();return(0,r.useMemo)(()=>{let t=e(i.current);return i.current=t,t},[...t])}function b(e){let t=p(e),i=(0,r.useRef)(null),n=(0,r.useCallback)(e=>{e!==i.current&&(null==t||t(e,i.current)),i.current=e},[]);return[i,n]}function w(e){let t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let v={};function _(e,t){return(0,r.useMemo)(()=>{if(t)return t;let i=null==v[e]?0:v[e]+1;return v[e]=i,e+"-"+i},[e,t])}function T(e){return function(t){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return r.reduce((t,i)=>{for(let[r,n]of Object.entries(i)){let i=t[r];null!=i&&(t[r]=i+e*n)}return t},{...t})}}let x=T(1),k=T(-1);function I(e){if(!e)return!1;let{KeyboardEvent:t}=l(e.target);return t&&e instanceof t}function A(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=l(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:i}=e.touches[0];return{x:t,y:i}}if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:i}=e.changedTouches[0];return{x:t,y:i}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let E=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:i}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:i}=e;return"scaleX("+t+") scaleY("+i+")"}},Transform:{toString(e){if(e)return[E.Translate.toString(e),E.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:i,easing:r}=e;return t+" "+i+"ms "+r}}}),S="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function C(e){return e.matches(S)?e:e.querySelector(S)}},2600:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return(i+r)*3/4-r},t.toByteArray=function(e){var t,i,a=l(e),s=a[0],o=a[1],u=new n((s+o)*3/4-o),c=0,h=o>0?s-4:s;for(i=0;i<h;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,u[c++]=255&t),1===o&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],s=0,o=r-n;s<o;s+=16383)a.push(function(e,t,r){for(var n,a=[],s=t;s<r;s+=3)a.push(i[(n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return a.join("")}(e,s,s+16383>o?o:s+16383));return 1===n?a.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&a.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),a.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9352:(e,t,i)=>{"use strict";let r=i(2600),n=i(1109),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,i)}function l(e,t,i){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);let i=0|p(e,t),r=s(i),n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(z(e,Uint8Array)){let t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(z(e,SharedArrayBuffer)||e&&z(e.buffer,SharedArrayBuffer)))return f(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,i);let n=function(e){var t;if(o.isBuffer(e)){let t=0|d(e.length),i=s(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|d(e))}function h(e){let t=e.length<0?0:0|d(e.length),i=s(t);for(let r=0;r<t;r+=1)i[r]=255&e[r];return i}function f(e,t,i){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),o.prototype),r}function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return O(e).length;default:if(n)return r?-1:D(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,i){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){let r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=t;r<i;++r)n+=P[e[r]];return n}(this,t,i);case"utf8":case"utf-8":return w(this,t,i);case"ascii":return function(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":var a,s;return a=t,s=i,0===a&&s===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){let r=e.slice(t,i),n="";for(let e=0;e<r.length-1;e+=2)n+=String.fromCharCode(r[e]+256*r[e+1]);return n}(this,t,i);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,i){let r=e[t];e[t]=e[i],e[i]=r}function y(e,t,i,r,n){var a;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(a=i=+i)!=a&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return -1;i=e.length-1}else if(i<0){if(!n)return -1;i=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,i,r,n);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):b(e,[t],i,r,n);throw TypeError("val must be string, number or Buffer")}function b(e,t,i,r,n){let a,s=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;s=2,o/=2,l/=2,i/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let r=-1;for(a=i;a<o;a++)if(u(e,a)===u(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*s}else -1!==r&&(a-=a-r),r=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){let i=!0;for(let r=0;r<l;r++)if(u(e,a+r)!==u(t,r)){i=!1;break}if(i)return a}return -1}function w(e,t,i){i=Math.min(e.length,i);let r=[],n=t;for(;n<i;){let t=e[n],a=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=i){let i,r,o,l;switch(s){case 1:t<128&&(a=t);break;case 2:(192&(i=e[n+1]))==128&&(l=(31&t)<<6|63&i)>127&&(a=l);break;case 3:i=e[n+1],r=e[n+2],(192&i)==128&&(192&r)==128&&(l=(15&t)<<12|(63&i)<<6|63&r)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:i=e[n+1],r=e[n+2],o=e[n+3],(192&i)==128&&(192&r)==128&&(192&o)==128&&(l=(15&t)<<18|(63&i)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),n+=s}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return i}(r)}function v(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function _(e,t,i,r,n,a){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function T(e,t,i,r,n){R(t,r,n,e,i,7);let a=Number(t&BigInt(0xffffffff));e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,i}function x(e,t,i,r,n){R(t,r,n,e,i,7);let a=Number(t&BigInt(0xffffffff));e[i+7]=a,a>>=8,e[i+6]=a,a>>=8,e[i+5]=a,a>>=8,e[i+4]=a;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[i+3]=s,s>>=8,e[i+2]=s,s>>=8,e[i+1]=s,s>>=8,e[i]=s,i+8}function k(e,t,i,r,n,a){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function I(e,t,i,r,a){return t=+t,i>>>=0,a||k(e,t,i,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,i,r,23,4),i+4}function A(e,t,i,r,a){return t=+t,i>>>=0,a||k(e,t,i,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,i,r,52,8),i+8}t.hp=o,t.IS=50,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,i){return l(e,t,i)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,i){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof i?s(e).fill(t,i):s(e).fill(t):s(e)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(z(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,r=t.length;for(let n=0,a=Math.min(i,r);n<a;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){let i;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;let r=o.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){let t=e[i];if(z(t,Uint8Array))n+t.length>r.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(r,n)):Uint8Array.prototype.set.call(r,t,n);else if(o.isBuffer(t))t.copy(r,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return r},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",i=t.IS;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(e,t,i,r,n){if(z(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;let a=n-r,s=i-t,l=Math.min(a,s),u=this.slice(r,n),c=e.slice(t,i);for(let e=0;e<l;++e)if(u[e]!==c[e]){a=u[e],s=c[e];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},o.prototype.indexOf=function(e,t,i){return y(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return y(this,e,t,i,!1)},o.prototype.write=function(e,t,i,r){var n,a,s,o,l,u,c,h;if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-t;if((void 0===i||i>f)&&(i=f),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let d=!1;for(;;)switch(r){case"hex":return function(e,t,i,r){let n;i=Number(i)||0;let a=e.length-i;r?(r=Number(r))>a&&(r=a):r=a;let s=t.length;for(r>s/2&&(r=s/2),n=0;n<r;++n){let r=parseInt(t.substr(2*n,2),16);if(r!=r)break;e[i+n]=r}return n}(this,e,t,i);case"utf8":case"utf-8":return n=t,a=i,N(D(e,this.length-n),this,n,a);case"ascii":case"latin1":case"binary":return s=t,o=i,N(function(e){let t=[];for(let i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(e),this,s,o);case"base64":return l=t,u=i,N(O(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=i,N(function(e,t){let i,r;let n=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=(i=e.charCodeAt(a))>>8,n.push(i%256),n.push(r);return n}(e,this.length-c),this,c,h);default:if(d)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){let i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);let r=this[e],n=1,a=0;for(;++a<t&&(n*=256);)r+=this[e+a]*n;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);let r=this[e+--t],n=1;for(;t>0&&(n*=256);)r+=this[e+--t]*n;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=U(function(e){B(e>>>=0,"offset");let t=this[e],i=this[e+7];(void 0===t||void 0===i)&&M(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*i;return BigInt(r)+(BigInt(n)<<BigInt(32))}),o.prototype.readBigUInt64BE=U(function(e){B(e>>>=0,"offset");let t=this[e],i=this[e+7];(void 0===t||void 0===i)&&M(e,this.length-8);let r=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],n=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),o.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);let r=this[e],n=1,a=0;for(;++a<t&&(n*=256);)r+=this[e+a]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);let r=t,n=1,a=this[e+--r];for(;r>0&&(n*=256);)a+=this[e+--r]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);let i=this[e]|this[e+1]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);let i=this[e+1]|this[e]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=U(function(e){B(e>>>=0,"offset");let t=this[e],i=this[e+7];return(void 0===t||void 0===i)&&M(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),o.prototype.readBigInt64BE=U(function(e){B(e>>>=0,"offset");let t=this[e],i=this[e+7];return(void 0===t||void 0===i)&&M(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+i)}),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,i,r){if(e=+e,t>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;_(this,e,t,i,r,0)}let n=1,a=0;for(this[t]=255&e;++a<i&&(n*=256);)this[t+a]=e/n&255;return t+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,i,r){if(e=+e,t>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;_(this,e,t,i,r,0)}let n=i-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=U(function(e,t=0){return T(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=U(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*i-1);_(this,e,t,i,r-1,-r)}let n=0,a=1,s=0;for(this[t]=255&e;++n<i&&(a*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/a>>0)-s&255;return t+i},o.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*i-1);_(this,e,t,i,r-1,-r)}let n=i-1,a=1,s=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/a>>0)-s&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||_(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=U(function(e,t=0){return T(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=U(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,i){return I(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return I(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return A(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return A(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,r){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);let n=r-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,r):Uint8Array.prototype.set.call(e,this.subarray(i,r),t),n},o.prototype.fill=function(e,t,i,r){let n;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{let a=o.isBuffer(e)?e:o.from(e,r),s=a.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=a[n%s]}return this};let E={};function S(e,t,i){E[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function C(e){let t="",i=e.length,r="-"===e[0]?1:0;for(;i>=r+4;i-=3)t=`_${e.slice(i-3,i)}${t}`;return`${e.slice(0,i)}${t}`}function R(e,t,i,r,n,a){if(e>i||e<t){let r;let n="bigint"==typeof t?"n":"";throw r=a>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(a+1)*8}${n}`:`>= -(2${n} ** ${(a+1)*8-1}${n}) and < 2 ** ${(a+1)*8-1}${n}`:`>= ${t}${n} and <= ${i}${n}`,new E.ERR_OUT_OF_RANGE("value",r,e)}B(n,"offset"),(void 0===r[n]||void 0===r[n+a])&&M(n,r.length-(a+1))}function B(e,t){if("number"!=typeof e)throw new E.ERR_INVALID_ARG_TYPE(t,"number",e)}function M(e,t,i){if(Math.floor(e)!==e)throw B(e,i),new E.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new E.ERR_BUFFER_OUT_OF_BOUNDS;throw new E.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,e)}S("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),S("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),S("ERR_OUT_OF_RANGE",function(e,t,i){let r=`The value of "${e}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>0x100000000?n=C(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=C(n)),n+="n"),r+=` It must be ${t}. Received ${n}`},RangeError);let L=/[^+/0-9A-Za-z-_]/g;function D(e,t){let i;t=t||1/0;let r=e.length,n=null,a=[];for(let s=0;s<r;++s){if((i=e.charCodeAt(s))>55295&&i<57344){if(!n){if(i>56319||s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return a}function O(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,i,r){let n;for(n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let P=function(){let e="0123456789abcdef",t=Array(256);for(let i=0;i<16;++i){let r=16*i;for(let n=0;n<16;++n)t[r+n]=e[i]+e[n]}return t}();function U(e){return"undefined"==typeof BigInt?F:e}function F(){throw Error("BigInt not supported")}},7015:(e,t)=>{"use strict";var i=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,a=/\\([\u000b\u0020-\u00ff])/g,s=/([\\"])/g,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(e){this.parameters=Object.create(null),this.type=e}t.format=function(e){if(!e||"object"!=typeof e)throw TypeError("argument obj is required");var t=e.parameters,i=e.type;if(!i||!o.test(i))throw TypeError("invalid type");var a=i;if(t&&"object"==typeof t)for(var l,u=Object.keys(t).sort(),c=0;c<u.length;c++){if(l=u[c],!n.test(l))throw TypeError("invalid parameter name");a+="; "+l+"="+function(e){var t=String(e);if(n.test(t))return t;if(t.length>0&&!r.test(t))throw TypeError("invalid parameter value");return'"'+t.replace(s,"\\$1")+'"'}(t[l])}return a},t.parse=function(e){if(!e)throw TypeError("argument string is required");var t,r,n,s="object"==typeof e?function(e){var t;if("function"==typeof e.getHeader?t=e.getHeader("content-type"):"object"==typeof e.headers&&(t=e.headers&&e.headers["content-type"]),"string"!=typeof t)throw TypeError("content-type header is missing from object");return t}(e):e;if("string"!=typeof s)throw TypeError("argument string is required to be a string");var u=s.indexOf(";"),c=-1!==u?s.slice(0,u).trim():s.trim();if(!o.test(c))throw TypeError("invalid media type");var h=new l(c.toLowerCase());if(-1!==u){for(i.lastIndex=u;r=i.exec(s);){if(r.index!==u)throw TypeError("invalid parameter format");u+=r[0].length,t=r[1].toLowerCase(),34===(n=r[2]).charCodeAt(0)&&-1!==(n=n.slice(1,-1)).indexOf("\\")&&(n=n.replace(a,"$1")),h.parameters[t]=n}if(u!==s.length)throw TypeError("invalid parameter format")}return h}},820:(e,t,i)=>{var r=i(5036);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;t.splice(1,0,i,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))}),t.splice(n,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(4781)(t);let{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4781:(e,t,i)=>{e.exports=function(e){function t(e){let i,n,a;let s=null;function o(...e){if(!o.enabled)return;let r=Number(new Date),n=r-(i||r);o.diff=n,o.prev=i,o.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(i,r)=>{if("%%"===i)return"%";a++;let n=t.formatters[r];if("function"==typeof n){let t=e[a];i=n.call(o,t),e.splice(a,1),a--}return i}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==t.namespaces&&(n=t.namespaces,a=t.enabled(e)),a),set:e=>{s=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,i){let r=t(this.namespace+(void 0===i?":":i)+e);return r.log=this.log,r}function n(e,t){let i=0,r=0,n=-1,a=0;for(;i<e.length;)if(r<t.length&&(t[r]===e[i]||"*"===t[r]))"*"===t[r]?(n=r,a=i):i++,r++;else{if(-1===n)return!1;r=n+1,i=++a}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let i of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===i[0]?t.skips.push(i.slice(1)):t.names.push(i)},t.enabled=function(e){for(let i of t.skips)if(n(e,i))return!1;for(let i of t.names)if(n(e,i))return!0;return!1},t.humanize=i(8741),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(i=>{t[i]=e[i]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t)|0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},1109:(e,t)=>{t.read=function(e,t,i,r,n){var a,s,o=8*n-r-1,l=(1<<o)-1,u=l>>1,c=-7,h=i?n-1:0,f=i?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+h],h+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),a-=u}return(d?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,i,r,n,a){var s,o,l,u=8*a-n-1,c=(1<<u)-1,h=c>>1,f=23===n?5960464477539062e-23:0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=f/l:t+=f*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(t*l-1)*Math.pow(2,n),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[i+d]=255&o,d+=p,o/=256,n-=8);for(s=s<<n|o,u+=n;u>0;e[i+d]=255&s,d+=p,s/=256,u-=8);e[i+d-p]|=128*m}},4041:(e,t)=>{"use strict";var i=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function r(e,t,i){this.type=e,this.subtype=t,this.suffix=i}t.qg=function(e){if(!e)throw TypeError("argument string is required");if("string"!=typeof e)throw TypeError("argument string is required to be a string");var t,n=i.exec(e.toLowerCase());if(!n)throw TypeError("invalid media type");var a=n[1],s=n[2],o=s.lastIndexOf("+");return -1!==o&&(t=s.substr(o+1),s=s.substr(0,o)),new r(a,s,t)}},8741:e=>{function t(e,t,i,r){return Math.round(e/i)+" "+r+(t>=1.5*i?"s":"")}e.exports=function(e,i){i=i||{};var r,n,a=typeof e;if("string"===a&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===a&&isFinite(e))return i.long?(r=Math.abs(e))>=864e5?t(e,r,864e5,"day"):r>=36e5?t(e,r,36e5,"hour"):r>=6e4?t(e,r,6e4,"minute"):r>=1e3?t(e,r,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1762:(e,t,i)=>{"use strict";var r,n,a,s,o;i.d(t,{DE:()=>s,Ci:()=>u,TA:()=>c}),"function"==typeof SuppressedError&&SuppressedError;async function l(e,t={},i){return window.__TAURI_INTERNALS__.invoke(e,t,i)}new WeakMap,new WeakMap,new WeakMap,new WeakMap,function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"}(s||(s={})),!function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"}(o||(o={}));async function u(e,t){if(e instanceof URL&&"file:"!==e.protocol)throw TypeError("Must be a file URL.");return await l("plugin:fs|read_dir",{path:e instanceof URL?e.toString():e,options:t})}async function c(e,t){if(e instanceof URL&&"file:"!==e.protocol)throw TypeError("Must be a file URL.");let i=await l("plugin:fs|read_file",{path:e instanceof URL?e.toString():e,options:t});return i instanceof ArrayBuffer?new Uint8Array(i):Uint8Array.from(i)}},6044:(e,t,i)=>{"use strict";i.d(t,{A:()=>X});let r=Math.PI,n=2*r,a=r/2,s="dual-combined",o="dual-horizontal",l="single",u="dual-vertical",c="bar-index",h="bar-level",f="gradient",d="click",p="resize",m="sans-serif",g="create",y="fschange",b="user",w="#fff",v="#888",_="bark",T="linear",x=["#a35","#c66","#e94","#ed0","#9d5","#4d8","#2cb","#0bc","#09c","#36b"],k=[["classic",{colorStops:["red",{color:"yellow",level:.85,pos:.6},{color:"lime",level:.475}]}],["prism",{colorStops:x}],["rainbow",{dir:"h",colorStops:["#817",...x,"#639"]}],["orangered",{bgColor:"#3e2f29",colorStops:["OrangeRed"]}],["steelblue",{bgColor:"#222c35",colorStops:["SteelBlue"]}]],I={alphaBars:!1,ansiBands:!1,barSpace:.1,bgAlpha:.7,channelLayout:l,colorMode:f,fadePeaks:!1,fftSize:8192,fillAlpha:1,frequencyScale:"log",gradient:k[0][0],gravity:3.8,height:void 0,ledBars:!1,linearAmplitude:!1,linearBoost:1,lineWidth:0,loRes:!1,lumiBars:!1,maxDecibels:-25,maxFPS:0,maxFreq:22e3,minDecibels:-85,minFreq:20,mirror:0,mode:0,noteLabels:!1,outlineBars:!1,overlay:!1,peakFadeTime:750,peakHoldTime:500,peakLine:!1,radial:!1,radialInvert:!1,radius:.3,reflexAlpha:.15,reflexBright:1,reflexFit:!0,reflexRatio:0,roundBars:!1,showBgColor:!0,showFPS:!1,showPeaks:!0,showScaleX:!0,showScaleY:!1,smoothing:.5,spinSpeed:0,splitGradient:!1,start:!0,trueLeds:!1,useCanvas:!0,volume:1,weightingFilter:"",width:void 0},A=["ERR_AUDIO_CONTEXT_FAIL","Could not create audio context. Web Audio API not supported?"],E=["ERR_INVALID_AUDIO_CONTEXT","Provided audio context is not valid"],S=["ERR_UNKNOWN_GRADIENT","Unknown gradient"],C=["ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1"],R=["ERR_INVALID_MODE","Invalid mode"],B=["ERR_REFLEX_OUT_OF_RANGE","Reflex ratio must be >= 0 and < 1"],M=["ERR_INVALID_AUDIO_SOURCE","Audio source must be an instance of HTMLMediaElement or AudioNode"],L=["ERR_GRADIENT_INVALID_NAME","Gradient name must be a non-empty string"],D=["ERR_GRADIENT_NOT_AN_OBJECT","Gradient options must be an object"],O=["ERR_GRADIENT_MISSING_COLOR","Gradient colorStops must be a non-empty array"];class N extends Error{constructor(e,t){let[i,r]=e;super(r+(void 0!==t?`: ${t}`:"")),this.name="AudioMotionError",this.code=i}}let z=(e,t)=>console.warn(`${e} is deprecated. Use ${t} instead.`),P=e=>{for(let t in e)return!1;return!0},U=(e,t,i="toLowerCase")=>t[Math.max(0,t.indexOf((""+e)[i]()))],F=(e,t,i,r,n)=>t+(r-t)*(n-e)/(i-e);Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(e){let t=this.length;for(;t-- >0;)if(e(this[t]))return t;return -1});class G{constructor(e,t={}){let i;this._ready=!1,this._aux={},this._canvasGradients=[],this._destroyed=!1,this._energy={val:0,peak:0,hold:0},this._flg={},this._fps=0,this._gradients={},this._last=0,this._outNodes=[],this._ownContext=!1,this._selectedGrads=[],this._sources=[],e instanceof Element||(P(t)&&!P(e)&&(t=e),e=null),this._ownCanvas=!(t.canvas instanceof HTMLCanvasElement);let r=this._ownCanvas?document.createElement("canvas"):t.canvas;for(let[e,t]of(r.style="max-width: 100%;",this._ctx=r.getContext("2d"),k))this.registerGradient(e,t);if(this._container=e||!this._ownCanvas&&r.parentElement||document.body,this._defaultWidth=this._container.clientWidth||640,this._defaultHeight=this._container.clientHeight||270,t.source&&(i=t.source.context));else if(i=t.audioCtx);else try{i=new(window.AudioContext||window.webkitAudioContext),this._ownContext=!0}catch(e){throw new N(A)}if(!i.createGain)throw new N(E);let n=this._analyzer=[i.createAnalyser(),i.createAnalyser()],a=this._splitter=i.createChannelSplitter(2),s=this._merger=i.createChannelMerger(2);for(let e of(this._input=i.createGain(),this._output=i.createGain(),t.source&&this.connectInput(t.source),[0,1]))a.connect(n[e],e);for(let e of(s.connect(this._output),!1!==t.connectSpeakers&&this.connectOutput(),["_scaleX","_scaleR"]))this[e]=document.createElement("canvas").getContext("2d");this._fsEl=t.fsElement||r;let o=()=>{this._fsTimeout||(this._fsTimeout=window.setTimeout(()=>{this._fsChanging||(this._setCanvas(p),this._fsTimeout=0)},60))};window.ResizeObserver&&(this._observer=new ResizeObserver(o),this._observer.observe(this._container)),this._controller=new AbortController;let l=this._controller.signal;window.addEventListener(p,o,{signal:l}),r.addEventListener("fullscreenchange",()=>{this._fsChanging=!0,this._fsTimeout&&window.clearTimeout(this._fsTimeout),this._setCanvas(y),this._fsTimeout=window.setTimeout(()=>{this._fsChanging=!1,this._fsTimeout=0},60)},{signal:l});let u=()=>{"suspended"==i.state&&i.resume(),window.removeEventListener(d,u)};window.addEventListener(d,u),document.addEventListener("visibilitychange",()=>{"hidden"!=document.visibilityState&&(this._frames=0,this._time=performance.now())},{signal:l}),this._setProps(t,!0),this.useCanvas&&this._ownCanvas&&this._container.appendChild(r),this._ready=!0,this._setCanvas(g)}get alphaBars(){return this._alphaBars}set alphaBars(e){this._alphaBars=!!e,this._calcBars()}get ansiBands(){return this._ansiBands}set ansiBands(e){this._ansiBands=!!e,this._calcBars()}get barSpace(){return this._barSpace}set barSpace(e){this._barSpace=+e||0,this._calcBars()}get channelLayout(){return this._chLayout}set channelLayout(e){this._chLayout=U(e,[l,o,u,s]),this._input.disconnect(),this._input.connect(this._chLayout!=l?this._splitter:this._analyzer[0]),this._analyzer[0].disconnect(),this._outNodes.length&&this._analyzer[0].connect(this._chLayout!=l?this._merger:this._output),this._calcBars(),this._makeGrad()}get colorMode(){return this._colorMode}set colorMode(e){this._colorMode=U(e,[f,c,h])}get fadePeaks(){return this._fadePeaks}set fadePeaks(e){this._fadePeaks=!!e}get fftSize(){return this._analyzer[0].fftSize}set fftSize(e){for(let t of[0,1])this._analyzer[t].fftSize=e;let t=this._analyzer[0].frequencyBinCount;this._fftData=[new Float32Array(t),new Float32Array(t)],this._calcBars()}get frequencyScale(){return this._frequencyScale}set frequencyScale(e){this._frequencyScale=U(e,["log",_,"mel",T]),this._calcBars()}get gradient(){return this._selectedGrads[0]}set gradient(e){this._setGradient(e)}get gradientLeft(){return this._selectedGrads[0]}set gradientLeft(e){this._setGradient(e,0)}get gradientRight(){return this._selectedGrads[1]}set gradientRight(e){this._setGradient(e,1)}get gravity(){return this._gravity}set gravity(e){this._gravity=e>0?+e:this._gravity||I.gravity}get height(){return this._height}set height(e){this._height=e,this._setCanvas(b)}get ledBars(){return this._showLeds}set ledBars(e){this._showLeds=!!e,this._calcBars()}get linearAmplitude(){return this._linearAmplitude}set linearAmplitude(e){this._linearAmplitude=!!e}get linearBoost(){return this._linearBoost}set linearBoost(e){this._linearBoost=e>=1?+e:1}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=+e||0}get loRes(){return this._loRes}set loRes(e){this._loRes=!!e,this._setCanvas("lores")}get lumiBars(){return this._lumiBars}set lumiBars(e){this._lumiBars=!!e,this._calcBars(),this._makeGrad()}get maxDecibels(){return this._analyzer[0].maxDecibels}set maxDecibels(e){for(let t of[0,1])this._analyzer[t].maxDecibels=e}get maxFPS(){return this._maxFPS}set maxFPS(e){this._maxFPS=e<0?0:+e||0}get maxFreq(){return this._maxFreq}set maxFreq(e){if(e<1)throw new N(C);this._maxFreq=Math.min(e,this.audioCtx.sampleRate/2),this._calcBars()}get minDecibels(){return this._analyzer[0].minDecibels}set minDecibels(e){for(let t of[0,1])this._analyzer[t].minDecibels=e}get minFreq(){return this._minFreq}set minFreq(e){if(e<1)throw new N(C);this._minFreq=+e,this._calcBars()}get mirror(){return this._mirror}set mirror(e){this._mirror=0|Math.sign(e),this._calcBars(),this._makeGrad()}get mode(){return this._mode}set mode(e){let t=0|e;if(t>=0&&t<=10&&9!=t)this._mode=t,this._calcBars(),this._makeGrad();else throw new N(R,e)}get noteLabels(){return this._noteLabels}set noteLabels(e){this._noteLabels=!!e,this._createScales()}get outlineBars(){return this._outlineBars}set outlineBars(e){this._outlineBars=!!e,this._calcBars()}get peakFadeTime(){return this._peakFadeTime}set peakFadeTime(e){this._peakFadeTime=e>=0?+e:this._peakFadeTime||I.peakFadeTime}get peakHoldTime(){return this._peakHoldTime}set peakHoldTime(e){this._peakHoldTime=+e||0}get peakLine(){return this._peakLine}set peakLine(e){this._peakLine=!!e}get radial(){return this._radial}set radial(e){this._radial=!!e,this._calcBars(),this._makeGrad()}get radialInvert(){return this._radialInvert}set radialInvert(e){this._radialInvert=!!e,this._calcBars(),this._makeGrad()}get radius(){return this._radius}set radius(e){this._radius=+e||0,this._calcBars(),this._makeGrad()}get reflexRatio(){return this._reflexRatio}set reflexRatio(e){if((e=+e||0)<0||e>=1)throw new N(B);this._reflexRatio=e,this._calcBars(),this._makeGrad()}get roundBars(){return this._roundBars}set roundBars(e){this._roundBars=!!e,this._calcBars()}get smoothing(){return this._analyzer[0].smoothingTimeConstant}set smoothing(e){for(let t of[0,1])this._analyzer[t].smoothingTimeConstant=e}get spinSpeed(){return this._spinSpeed}set spinSpeed(e){e=+e||0,(void 0===this._spinSpeed||0==e)&&(this._spinAngle=-a),this._spinSpeed=e}get splitGradient(){return this._splitGradient}set splitGradient(e){this._splitGradient=!!e,this._makeGrad()}get stereo(){return z("stereo","channelLayout"),this._chLayout!=l}set stereo(e){z("stereo","channelLayout"),this.channelLayout=e?u:l}get trueLeds(){return this._trueLeds}set trueLeds(e){this._trueLeds=!!e}get volume(){return this._output.gain.value}set volume(e){this._output.gain.value=e}get weightingFilter(){return this._weightingFilter}set weightingFilter(e){this._weightingFilter=U(e,["","A","B","C","D","468"],"toUpperCase")}get width(){return this._width}set width(e){this._width=e,this._setCanvas(b)}get audioCtx(){return this._input.context}get canvas(){return this._ctx.canvas}get canvasCtx(){return this._ctx}get connectedSources(){return this._sources}get connectedTo(){return this._outNodes}get fps(){return this._fps}get fsHeight(){return this._fsHeight}get fsWidth(){return this._fsWidth}get isAlphaBars(){return this._flg.isAlpha}get isBandsMode(){return this._flg.isBands}get isDestroyed(){return this._destroyed}get isFullscreen(){return this._fsEl&&(document.fullscreenElement||document.webkitFullscreenElement)===this._fsEl}get isLedBars(){return this._flg.isLeds}get isLumiBars(){return this._flg.isLumi}get isOctaveBands(){return this._flg.isOctaves}get isOn(){return!!this._runId}get isOutlineBars(){return this._flg.isOutline}get pixelRatio(){return this._pixelRatio}get isRoundBars(){return this._flg.isRound}static get version(){return"4.5.0"}connectInput(e){let t=e instanceof HTMLMediaElement;if(!(t||e.connect))throw new N(M);let i=t?this.audioCtx.createMediaElementSource(e):e;return this._sources.includes(i)||(i.connect(this._input),this._sources.push(i)),i}connectOutput(e=this.audioCtx.destination){if(!this._outNodes.includes(e)&&(this._output.connect(e),this._outNodes.push(e),1==this._outNodes.length))for(let e of[0,1])this._analyzer[e].connect(this._chLayout!=l||e?this._merger:this._output,0,e)}destroy(){if(!this._ready)return;let{audioCtx:e,canvas:t,_controller:i,_input:r,_merger:n,_observer:a,_ownCanvas:s,_ownContext:o,_splitter:l}=this;this._destroyed=!0,this._ready=!1,this.stop(),i.abort(),a&&a.disconnect(),this.onCanvasResize=null,this.onCanvasDraw=null,this._fsEl=null,this.disconnectInput(),this.disconnectOutput(),r.disconnect(),l.disconnect(),n.disconnect(),o&&e.close(),s&&t.remove(),this._calcBars()}disconnectInput(e,t){for(let i of(e?Array.isArray(e)||(e=[e]):e=Array.from(this._sources),e)){let e=this._sources.indexOf(i);if(t&&i.mediaStream)for(let e of i.mediaStream.getAudioTracks())e.stop();e>=0&&(i.disconnect(this._input),this._sources.splice(e,1))}}disconnectOutput(e){if((!e||this._outNodes.includes(e))&&(this._output.disconnect(e),this._outNodes=e?this._outNodes.filter(t=>t!==e):[],0==this._outNodes.length))for(let e of[0,1])this._analyzer[e].disconnect()}getBars(){return Array.from(this._bars,({posX:e,freq:t,freqLo:i,freqHi:r,hold:n,peak:a,value:s})=>({posX:e,freq:t,freqLo:i,freqHi:r,hold:n,peak:a,value:s}))}getEnergy(e,t){if(void 0===e)return this._energy.val;if(e!=+e){if("peak"==e)return this._energy.peak;let i={bass:[20,250],lowMid:[250,500],mid:[500,2e3],highMid:[2e3,4e3],treble:[4e3,16e3]};if(!i[e])return null;[e,t]=i[e]}let i=this._freqToBin(e),r=t?this._freqToBin(t):i,n=this._chLayout==l?1:2,a=0;for(let e=0;e<n;e++)for(let t=i;t<=r;t++)a+=this._normalizedB(this._fftData[e][t]);return a/(r-i+1)/n}getOptions(e){Array.isArray(e)||(e=[e]);let t={};for(let i of Object.keys(I))e.includes(i)||("gradient"==i&&this.gradientLeft!=this.gradientRight?(t.gradientLeft=this.gradientLeft,t.gradientRight=this.gradientRight):"start"==i||(t[i]=this[i]));return t}registerGradient(e,t){if("string"!=typeof e||0==e.trim().length)throw new N(L);if("object"!=typeof t)throw new N(D);let{colorStops:i}=t;if(!Array.isArray(i)||!i.length)throw new N(O);let r=i.length,n=e=>+e!=e||e<0||e>1;i.forEach((e,t)=>{let a=t/Math.max(1,r-1);"object"!=typeof e?i[t]={pos:a,color:e}:n(e.pos)&&(e.pos=a),n(e.level)&&(i[t].level=1-t/r)}),i.sort((e,t)=>e.level<t.level?1:e.level>t.level?-1:0),i[0].level=1,this._gradients[e]={bgColor:t.bgColor||"#111",dir:t.dir,colorStops:i},this._selectedGrads.includes(e)&&this._makeGrad()}setCanvasSize(e,t){this._width=e,this._height=t,this._setCanvas(b)}setFreqRange(e,t){if(e<1||t<1)throw new N(C);this._minFreq=Math.min(e,t),this.maxFreq=Math.max(e,t)}setLedParams(e){let t,i,r;e&&(t=0|e.maxLeds,i=+e.spaceV,r=+e.spaceH),this._ledParams=t>0&&i>0&&r>=0?[t,i,r]:void 0,this._calcBars()}setOptions(e){this._setProps(e)}setSensitivity(e,t){for(let i of[0,1])this._analyzer[i].minDecibels=Math.min(e,t),this._analyzer[i].maxDecibels=Math.max(e,t)}start(){this.toggleAnalyzer(!0)}stop(){this.toggleAnalyzer(!1)}toggleAnalyzer(e){let t=this.isOn;return void 0===e&&(e=!t),t&&!e?(cancelAnimationFrame(this._runId),this._runId=0):t||!e||this._destroyed||(this._frames=0,this._time=performance.now(),this._runId=requestAnimationFrame(e=>this._draw(e))),this.isOn}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e=this._fsEl;if(!e)return;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}_binToFreq(e){return e*this.audioCtx.sampleRate/this.fftSize||1}_calcBars(){let e,t,i;let r=this._bars=[];if(!this._ready){this._flg={isAlpha:!1,isBands:!1,isLeds:!1,isLumi:!1,isOctaves:!1,isOutline:!1,isRound:!1,noLedGap:!1};return}let{_ansiBands:n,_barSpace:a,canvas:s,_chLayout:l,_maxFreq:c,_minFreq:h,_mirror:f,_mode:d,_radial:p,_radialInvert:m,_reflexRatio:g}=this,y=s.width>>1,b=s.height>>1,w=l==u&&!p,v=l==o,x=d%10!=0,k=x&&"log"==this._frequencyScale,I=this._showLeds&&x&&!p,A=this._lumiBars&&x&&!p,E=this._alphaBars&&!A&&10!=d,S=this._outlineBars&&x&&!A&&!I,C=this._roundBars&&x&&!A&&!I,R=l!=u||g>0&&!A,B=s.height-(w&&!I?.5:0)>>w,M=B*(A||p?1:1-g)|0,L=s.width-y*(v||0!=f),D=w?s.height-2*B:0,O=y*(-1==f&&!v&&!p),N=.375*Math.min(s.width,s.height)*(l==u?1:this._radius)|0,z=Math.min(y,b);m&&l!=u&&([N,z]=[z,N]);let P=e=>r.push({...e,peak:[0,0],hold:[0],alpha:[0],value:[0]}),U=e=>{let t=this._freqToBin(e,"floor"),i=this._binToFreq(t),r=Math.log2(e/i)/Math.log2(this._binToFreq(t+1)/i);return[t,r]};if(k){let a=(e,t,i)=>+e.toPrecision(i?Math.max(t,1+Math.log10(e)|0):t),s=e=>{let t=[1,1.12,1.25,1.4,1.6,1.8,2,2.24,2.5,2.8,3.15,3.55,4,4.5,5,5.6,6.3,7.1,8,9,10],i=0|Math.log10(e),r=e/10**i,n=1;for(;n<t.length&&r>t[n];)n++;return r-t[n-1]<t[n]-r&&n--,(t[n]*10**(i+5)|0)/1e5},o=[0,24,12,8,6,4,3,2,1][d],l=n?10**(3/(10*o)):2**(1/o),u=l**.5,f=n?7.94328235/(o%2?1:u):8.17579892;do{let e=f,t=a(e/u,4,!0),i=a(e*u,4,!0),[r,c]=U(t),[d,p]=U(i);(e=n?o<4?s(e):a(e,e.toString()[0]<5?3:2):a(e,4,!0))>=h&&P({posX:0,freq:e,freqLo:t,freqHi:i,binLo:r,binHi:d,ratioLo:c,ratioHi:p}),f*=l}while(f<=c);e=L/r.length,r.forEach((t,i)=>t.posX=O+i*e);let p=r[0],m=r[r.length-1];t=this._freqScaling(p.freqLo),i=L/(this._freqScaling(m.freqHi)-t),p.freqLo<h&&(p.freqLo=h,[p.binLo,p.ratioLo]=U(h)),m.freqHi>c&&(m.freqHi=c,[m.binHi,m.ratioHi]=U(c))}else if(x){let r=10*[0,24,12,8,6,4,3,2,1][d],n=e=>{switch(this._frequencyScale){case _:return 1960/(26.81/(e+.53)-1);case"mel":return 700*(2**e-1);case T:return e}};e=L/r,t=this._freqScaling(h),i=L/(this._freqScaling(c)-t);for(let a=0,s=0;a<r;a++,s+=e){let r=n(t+s/i),a=n(t+(s+e/2)/i),o=n(t+(s+e)/i),[l,u]=U(r),[c,h]=U(o);P({posX:O+s,freq:a,freqLo:r,freqHi:o,binLo:l,binHi:c,ratioLo:u,ratioHi:h})}}else{e=1,t=this._freqScaling(h),i=L/(this._freqScaling(c)-t);let n=this._freqToBin(h,"floor"),a=this._freqToBin(c),s=-999;for(let e=n;e<=a;e++){let n=this._binToFreq(e),a=O+Math.round(i*(this._freqScaling(n)-t));if(a>s)P({posX:a,freq:n,freqLo:n,freqHi:n,binLo:e,binHi:e,ratioLo:0,ratioHi:0}),s=a;else if(r.length){let t=r[r.length-1];t.binHi=e,t.freqHi=n,t.freq=(t.freqLo*n)**.5}}}let F=0,G=0;if(I){let t=this._pixelRatio/(window.devicePixelRatio>1&&window.screen.height<=540?2:1),i=this._ledParams,[r,n,a]=i||[[],[128,3,.45],[128,4,.225],[96,6,.225],[80,6,.225],[80,6,.125],[64,6,.125],[48,8,.125],[24,16,.125]][d],s,o=M;if(i){let e;let i=2*t;s=r+1;do G=(e=o/--s/(1+n))*n;while((e<i||G<i)&&s>1)}else G=Math.min(n*t,Math.max(2,o/(540/n)+.1|0));R&&(o+=G),i||(s=Math.min(r,o/(2*G)|0)),F=a>=1?a:e*a,this._leds=[s,F,G,o/s-G]}let X=Math.min(e-1,a*(a>0&&a<1?e:1));x&&(e-=Math.max(I?F:0,X)),r.forEach((t,i)=>{let n=t.posX,s=e;x&&(0!=a||I?n+=Math.max(I?F:0,X)/2:(n|=0,s|=0,i>0&&n>r[i-1].posX+r[i-1].width&&(n--,s++)),t.posX=n),t.barCenter=n+(1==e?0:s/2),t.width=s});let W=[];for(let e of[0,1]){let t=l==u?(B+D)*e:0,i=t+B,r=t+M-(!I||R?0:G);W.push({channelTop:t,channelBottom:i,analyzerBottom:r})}this._aux={analyzerHeight:M,analyzerWidth:L,centerX:y,centerY:b,channelCoords:W,channelHeight:B,channelGap:D,initialX:O,innerRadius:N,outerRadius:z,scaleMin:t,unitWidth:i},this._flg={isAlpha:E,isBands:x,isLeds:I,isLumi:A,isOctaves:k,isOutline:S,isRound:C,noLedGap:R},this._createScales()}_createScales(){if(!this._ready)return;let{analyzerWidth:e,initialX:t,innerRadius:i,scaleMin:r,unitWidth:s}=this._aux,{canvas:l,_frequencyScale:c,_mirror:h,_noteLabels:f,_radial:d,_scaleX:p,_scaleR:g}=this,y=p.canvas,b=g.canvas,v=[],_=this._chLayout==o,x=this._chLayout==u,k=Math.min(l.width,l.height),I=["C",,"D",,"E","F",,"G",,"A",,"B"],A=k/34|0,E=y.height>>1,S=A>>1,C=E*(f?.7:1.5),R=S*(f?1:2),B=2**(1/12);if(!f&&(this._ansiBands||"log"!=c))v.push(16,31.5,63,125,250,500,1e3,2e3,4e3),c==T?v.push(6e3,8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3):v.push(8e3,16e3);else{let e=8.17579892;for(let t=-1;t<11;t++)for(let i=0;i<12;i++){if(e>=this._minFreq&&e<=this._maxFreq){let r=I[i],n="C"==r;(r&&f&&!h&&!_||n)&&v.push(f?[e,r+(n?t:"")]:e)}e*=B}}b.width=b.height=Math.max(.15*k,(i<<1)+x*A);let M=b.width>>1,L=M-.7*A,D=(e,t)=>{let i=n*(e/l.width),r=i-a,s=L*Math.cos(r),o=L*Math.sin(r);g.save(),g.translate(M+s,M+o),g.rotate(i),g.fillText(t,0,0),g.restore()};y.width|=0,p.fillStyle=g.strokeStyle="#000c",p.fillRect(0,0,y.width,y.height),g.arc(M,M,M-A/2,0,n),g.lineWidth=A,g.stroke(),p.fillStyle=g.fillStyle=w,p.font=`${E}px ${m}`,g.font=`${S}px ${m}`,p.textAlign=g.textAlign="center";let O=-C/4,N=-R;for(let i of v){let[n,a]=Array.isArray(i)?i:[i,i<1e3?0|i:`${(i/100|0)/10}k`],o=s*(this._freqScaling(n)-r),u=.75*y.height,m="C"==a[0],b=E*(!f||h||_?3:m?1.2:.6);if(p.fillStyle=g.fillStyle=!m||h||_?w:"#4f4",f){let e="log"==c,t=c==T,i=["C"];if((e||n>2e3||!t&&n>250||(!d||x)&&(!t&&n>125||n>1e3))&&i.push("G"),(e||n>4e3||!t&&n>500||(!d||x)&&(!t&&n>250||n>2e3))&&i.push("E"),(t&&n>4e3||(!d||x)&&(e||n>2e3||!t&&n>500))&&i.push("D","F","A","B"),!i.includes(a[0]))continue}o>=O+C/2&&o<=e&&(p.fillText(a,_&&-1==h?e-o:t+o,u,b),(_||h&&(o>C||1==h))&&p.fillText(a,_&&1!=h?e+o:(t||l.width)-o,u,b),O=o+Math.min(b,p.measureText(a).width)/2),o>=N+R&&o<e-R&&(D(_&&1==h?e-o:o,a),(_||h&&(o>R||1==h))&&D(_&&-1!=h?e+o:-o,a),N=o)}}_draw(e){this._runId=requestAnimationFrame(e=>this._draw(e));let t=e-this._time,i=e-this._last,d=this._maxFPS?975/this._maxFPS:0;if(i<d)return;this._last=e-(d?i%d:0),this._frames++,t>=1e3&&(this._fps=this._frames/t*1e3,this._frames=0,this._time=e);let{isAlpha:p,isBands:g,isLeds:y,isLumi:b,isOctaves:w,isOutline:_,isRound:T,noLedGap:x}=this._flg,{analyzerHeight:k,centerX:I,centerY:A,channelCoords:E,channelHeight:S,channelGap:C,initialX:R,innerRadius:B,outerRadius:M}=this._aux,{_bars:L,canvas:D,_canvasGradients:O,_chLayout:N,_colorMode:z,_ctx:P,_energy:U,_fadePeaks:G,fillAlpha:X,_fps:W,_linearAmplitude:q,_lineWidth:$,maxDecibels:j,minDecibels:Y,_mirror:H,_mode:K,overlay:V,_radial:Z,showBgColor:J,showPeaks:Q,useCanvas:ee,_weightingFilter:et}=this,ei=this._scaleX.canvas,er=this._scaleR.canvas,en=W*this._peakFadeTime/1e3,ea=W**2,es=1e3*this._gravity,eo=W*this._peakHoldTime/1e3,el=N==s,eu=N==o,ec=N==u,eh=N==l,ef=y&&this._trueLeds&&z==f,ed=Z?D.width:this._aux.analyzerWidth,ep=R+ed,em=Q&&this._peakLine&&10==K,eg=Z?M-B:k,ey=eg/this._pixelRatio,[eb,ew,ev,e_]=this._leds||[];U.val>0&&W>0&&(this._spinAngle+=this._spinSpeed*n/60/W);let eT=e=>{if(this._reflexRatio>0&&!b&&!Z){let t,i;this.reflexFit||ec?(t=ec&&0==e?S+C:0,i=S-k):(t=D.height-2*k,i=k),P.save(),P.globalAlpha=this.reflexAlpha,1!=this.reflexBright&&(P.filter=`brightness(${this.reflexBright})`),P.setTransform(1,0,0,-1,0,D.height),P.drawImage(D,0,E[e].channelTop,D.width,k,0,t,D.width,i),P.restore()}},ex=e=>{let t=e**2,i=e=>20*Math.log10(e);switch(et){case"A":return 2+i(0x8dce284*t**2/((t+424.36)*Math.sqrt((t+11599.29)*(t+544496.41))*(t+0x8dce284)));case"B":return .17+i(0x8dce284*t*e/((t+424.36)*Math.sqrt(t+25122.25)*(t+0x8dce284)));case"C":return .06+i(0x8dce284*t/((t+424.36)*(t+0x8dce284)));case"D":return i(e/68966888496476e-18*Math.sqrt(((1037918.48-t)**2+1080768.16*t)/((9837328-t)**2+0xb2e400*t)/((t+79919.29)*(t+1345600))));case"468":return 18.2+i(1246332637532143e-19*e/Math.hypot(-4737338981378384e-39*e**6+2043828333606125e-30*e**4-1363894795463638e-22*t+1,1306612257412824e-34*e**5-2118150887518656e-26*e**3+5559488023498642e-19*e))}return 0},ek=(e,t,i)=>{P.beginPath(),P.moveTo(e,t),P.lineTo(e,i),P.stroke()},eI=e=>{if(e&&$){let e=P.globalAlpha;P.globalAlpha=1,P.stroke(),P.globalAlpha=e}},eA=e=>Math.max(0,(e*eb|0)*(e_+ev)-ev);V&&P.clearRect(0,0,D.width,D.height);let eE=0,eS=L.length,eC=eh?1:2;for(let e=0;e<eC;e++){let{channelTop:t,channelBottom:i,analyzerBottom:a}=E[e],s=this._gradients[this._selectedGrads[e]],o=s.colorStops,l=o.length,u=J&&(!y||V)?s.bgColor:"#000",d=ec&&Z&&e?-1:1,g=!e&&-1==H||e&&1==H,w=!eu||e&&1!=H?0:ed>>(e||!g),x=eu&&g?-1:1,M=()=>{let i=ei.height,r=i>>1,n=q?100:j,a=q?0:Y,s=q?20:5,o=k/(n-a),l=-1!=H&&(!eu||0==e||1==H),u=1!=H&&(!eu||e!=H);P.save(),P.fillStyle=v,P.font=`${r}px ${m}`,P.textAlign="right",P.lineWidth=1;for(let e=n;e>a;e-=s){let a=t+(n-e)*o,s=e%2==0|0;if(s){let n=a+r*(a==t?.8:.35);l&&P.fillText(e,.85*i,n),u&&P.fillText(e,(eu?ed:D.width)-.1*i,n),P.strokeStyle=v,P.setLineDash([2,4]),P.lineDashOffset=0}else P.strokeStyle="#555",P.setLineDash([2,8]),P.lineDashOffset=1;P.beginPath(),P.moveTo(R+i*s*l,~~a+.5),P.lineTo(ep-i*s*u,~~a+.5),P.stroke()}P.restore()},N=(e,t)=>{let i=eb[e]+(e<eb.length-1?(eb[e+1]-eb[e])*t:0);return isNaN(i)?-1/0:i},U=(e,t=x)=>t*n*((e+w)/D.width)+this._spinAngle,W=(e,t,i)=>{let r=B+t*d,n=U(e,i);return[I+r*Math.cos(n),A+r*Math.sin(n)]},er=(e,t,i,r,n)=>{for(let a of(P.beginPath(),H&&!eu?[1,-1]:[x])){let[s,o]=T?[U(e,a),U(e+i,a)]:[];P.moveTo(...W(e,t,a)),P.lineTo(...W(e,t+r,a)),T?P.arc(I,A,B+(t+r)*d,s,o,1!=a):P.lineTo(...W(e+i,t+r,a)),P.lineTo(...W(e+i,t,a)),T&&!n&&P.arc(I,A,B+t*d,o,s,1==a)}eI(n),P.fill()},eh=(t=0,i=0)=>{let r;if((z!=f||ef)&&10!=K){let e=z==c?i%l:o.findLastIndex(e=>y?eA(t)<=eA(e.level):t<=e.level);r=o[e].color}else r=O[e];P.fillStyle=P.strokeStyle=r};if(ee){if(eu&&!Z){let t=ed*(e+g),i=g?-1:1;P.setTransform(i,0,0,1,t,0)}if((!V||J)&&(V&&(P.globalAlpha=this.bgAlpha),P.fillStyle=u,0!=e&&(Z||el)||P.fillRect(R,t-C,ed,(V&&1==this.reflexAlpha?k:S)+C),P.globalAlpha=1),!this.showScaleY||b||Z||0!=e&&el||M(),y?(P.setLineDash([e_,ev]),P.lineWidth=L[0].width):P.lineWidth=_?Math.min($,L[0].width/2):$,P.save(),!Z){let e=new Path2D;e.rect(0,t,D.width,k),P.clip(e)}}let eb=this._fftData[e];this._analyzer[e].getFloatFrequencyData(eb),et&&(eb=eb.map((e,t)=>e+ex(this._binToFreq(t)))),P.beginPath();let ew=[];for(let i=0;i<eS;i++){let s=L[i],{posX:u,barCenter:c,width:f,freq:d,binLo:m,binHi:g,ratioLo:w,ratioHi:v}=s,x=Math.max(N(m,w),N(g,v));for(let e=m+1;e<g;e++)eb[e]>x&&(x=eb[e]);if(x=this._normalizedB(x),s.value[e]=x,eE+=x,s.peak[e]>0&&s.alpha[e]>0&&(s.hold[e]--,s.hold[e]<0)){if(G&&!em){let t=!p||_&&$>0?1:p?s.peak[e]:X;s.alpha[e]=t*(1+s.hold[e]/en)}else s.peak[e]+=s.hold[e]*es/ea/ey;s.alpha[e]<=0&&(s.peak[e]=0)}if(x>=s.peak[e]&&(s.peak[e]=x,s.hold[e]=eo,s.alpha[e]=!p||_&&$>0?1:p?x:X),!ee)continue;P.globalAlpha=b||p?x:_?X:1,eh(x,i);let k=b?eg:y?eA(x):x*eg|0;if(10==K){let e=i?0:(this._normalizedB(eb[L[1].binLo])*eg+k)/2;if(Z){if(0==i&&(eu&&P.moveTo(...W(0,0)),P.lineTo(...W(0,u<0?e:k))),u>=0){let e=[u,k];P.lineTo(...W(...e)),ew.push(e)}}else{if(0==i){if(-1!=H||eu){let e=m?this._normalizedB(eb[m-1])*eg:k;P.moveTo(R-$,a-e)}else P.moveTo(R,a-(u<R?e:k))}(eu||-1!=H||u>=R)&&P.lineTo(u,a-k)}}else if(y){if(J&&!V&&(0==e||!el)){let e=P.globalAlpha;P.strokeStyle="#7f7f7f22",P.globalAlpha=1,ek(c,t,a),P.strokeStyle=P.fillStyle,P.globalAlpha=e}if(ef){let e=b?0:o.findLastIndex(e=>eA(x)<=eA(e.level)),t=a;for(let i=l-1;i>=e;i--){P.strokeStyle=o[i].color;let r=a-(i==e?k:eA(o[i].level));ek(c,t,r),t=r-ev}}else ek(c,a,a-k)}else if(u>=R){if(Z)er(u,0,f,k,_);else if(T){let e=f/2,t=a+e;P.beginPath(),P.moveTo(u,t),P.lineTo(u,t-k),P.arc(c,t-k,e,r,n),P.lineTo(u+f,t),eI(_),P.fill()}else{let e=_?P.lineWidth:0;P.beginPath(),P.rect(u,a+e,f,-k-e),eI(_),P.fill()}}let I=s.peak[e],A=s.alpha[e];if(I>0&&A>0&&Q&&!em&&!b&&u>=R&&u<ep){if(G?P.globalAlpha=A:_&&$>0?P.globalAlpha=1:p&&(P.globalAlpha=I),(z==h||ef)&&eh(I),y){let e=eA(I);e>=ev&&P.fillRect(u,a-e,f,e_)}else if(Z){if(10!=K){let e=I*eg;er(u,e,f,!this._radialInvert||ec||e+B>=2?-2:2)}}else P.fillRect(u,a-I*eg,f,2)}}if(ee){if(P.globalAlpha=1,10==K){if(eh(),Z&&!eu){if(H){let e;for(;e=ew.pop();)P.lineTo(...W(...e,-1))}P.closePath()}if($>0&&P.stroke(),X>0){if(Z){let e=eu?U(ed>>1):0,t=eu?U(ed):n;P.moveTo(...W(eu?ed>>1:0,0)),P.arc(I,A,B,e,t,!eu||!g)}else P.lineTo(ep,a),P.lineTo(R,a);P.globalAlpha=X,P.fill(),P.globalAlpha=1}if((em||Z&&Q)&&(ew=[],P.beginPath(),L.forEach((t,i)=>{let r=t.posX,n=t.peak[e],s=i?"lineTo":"moveTo";if(Z&&r<0){let t=L[i+1];n=F(r,n,t.posX,t.peak[e],0),r=0}n*=eg,em?(P[s](...Z?W(r,n):[r,a-n]),Z&&H&&!eu&&ew.push([r,n])):n>0&&er(r,n,1,-2)}),em)){let e;for(;e=ew.pop();)P.lineTo(...W(...e,-1));P.lineWidth=1,P.stroke()}}P.restore(),eu&&!Z&&P.setTransform(1,0,0,1,0,0),(eu||el)&&!e||eT(e)}}if((e=>{U.val=e,U.peak>0&&(U.hold--,U.hold<0&&(U.peak+=U.hold*es/ea/D.height*this._pixelRatio)),e>=U.peak&&(U.peak=e,U.hold=eo)})(eE/(eS<<eC-1)),ee&&(!H||Z||eu||(P.setTransform(-1,0,0,1,D.width-R,0),P.drawImage(D,R,0,I,D.height,0,0,I,D.height),P.setTransform(1,0,0,1,0,0)),P.setLineDash([]),(()=>{this.showScaleX&&(Z?(P.save(),P.translate(I,A),this._spinSpeed&&P.rotate(this._spinAngle+a),P.drawImage(er,-er.width>>1,-er.width>>1),P.restore()):P.drawImage(ei,0,D.height-ei.height))})()),this.showFPS){let e=ei.height;P.font=`bold ${e}px ${m}`,P.fillStyle="#0f0",P.textAlign="right",P.fillText(Math.round(W),D.width-e,2*e)}this.onCanvasDraw&&(P.save(),P.fillStyle=P.strokeStyle=O[0],this.onCanvasDraw(this,{timestamp:e,canvasGradients:O}),P.restore())}_freqScaling(e){switch(this._frequencyScale){case"log":return Math.log2(e);case _:return 26.81*e/(1960+e)-.53;case"mel":return Math.log2(1+e/700);case T:return e}}_freqToBin(e,t="round"){let i=this._analyzer[0].frequencyBinCount-1,r=Math[t](e*this.fftSize/this.audioCtx.sampleRate);return r<i?r:i}_makeGrad(){if(!this._ready)return;let{canvas:e,_ctx:t,_radial:i,_reflexRatio:r}=this,{analyzerWidth:n,centerX:a,centerY:s,initialX:o,innerRadius:l,outerRadius:c}=this._aux,{isLumi:h}=this._flg,f=this._chLayout==u,d=1-r,p=h?e.height:e.height*(1-!f*r)|0;for(let e of[0,1]){let u;let m=this._gradients[this._selectedGrads[e]],g=m.colorStops,y="h"==m.dir;if(u=i?t.createRadialGradient(a,s,c,a,s,l-(c-l)*f):t.createLinearGradient(...y?[o,0,o+n,0]:[0,0,0,p]),g){let e=f&&!this._splitGradient&&(!y||i);for(let t=0;t<1+e;t++){let n=g.length-1;g.forEach((a,s)=>{let o=a.pos;e&&(o/=2),!f||h||i||y||(o*=d,e||!(o>.5*d)||(o+=.5*r)),1==t&&(i||h?o=1-(a=g[n-s]).pos/2:(0==s&&o>0&&u.addColorStop(.5,a.color),o+=.5)),u.addColorStop(o,a.color),f&&s==n&&o<.5&&u.addColorStop(.5,a.color)})}}this._canvasGradients[e]=u}}_normalizedB(e){let t;let i=this._linearAmplitude,r=i?1/this._linearBoost:1,n=this.maxDecibels,a=this.minDecibels;if(i){let t,i,s;t=n,n=10**(t/20),i=a,a=10**(i/20),s=e,e=(10**(s/20))**r}return(t=(e-a)/(n-a)**r)<=0?0:t>=1?1:t}_setCanvas(e){if(!this._ready)return;let{canvas:t,_ctx:i}=this,r=this._scaleX.canvas,n=window.devicePixelRatio/(this._loRes+1),a=window.screen.width*n,s=window.screen.height*n;90==Math.abs(window.orientation)&&a<s&&([a,s]=[s,a]);let o=this.isFullscreen,l=o&&this._fsEl==t,u=l?a:(this._width||this._container.clientWidth||this._defaultWidth)*n|0,c=l?s:(this._height||this._container.clientHeight||this._defaultHeight)*n|0;this._pixelRatio=n,this._fsWidth=a,this._fsHeight=s,(e==g||t.width!=u||t.height!=c)&&(t.width=u,t.height=c,this.overlay||(i.fillStyle="#000",i.fillRect(0,0,u,c)),i.lineJoin="bevel",r.width=u,r.height=Math.max(20*n,Math.min(u,c)/32|0),this._calcBars(),this._makeGrad(),void 0!==this._fsStatus&&this._fsStatus!==o&&(e=y),this._fsStatus=o,this.onCanvasResize&&this.onCanvasResize(e,this))}_setGradient(e,t){if(!this._gradients.hasOwnProperty(e))throw new N(S,e);[0,1].includes(t)||(this._selectedGrads[1]=e,t=0),this._selectedGrads[t]=e,this._makeGrad()}_setProps(e,t){let i=["onCanvasDraw","onCanvasResize"],r=Object.keys(I).filter(e=>"start"!=e).concat(i,["gradientLeft","gradientRight","stereo"]);for(let n of((t||void 0===e)&&(e={...I,...e}),Object.keys(e)))i.includes(n)&&"function"!=typeof e[n]?this[n]=void 0:r.includes(n)&&(this[n]=e[n]);void 0!==e.start&&this.toggleAnalyzer(e.start)}}let X=G},6122:(e,t,i)=>{"use strict";i.d(t,{e6:()=>n,fO:()=>u,gP:()=>o,nK:()=>l,qq:()=>a});let r=e=>class extends Error{constructor(t){super(t),this.name=e}};class n extends r("CouldNotDetermineFileTypeError"){}class a extends r("UnsupportedFileTypeError"){}class s extends r("UnexpectedFileContentError"){constructor(e,t){super(t),this.fileType=e}toString(){return`${this.name} (FileType: ${this.fileType}): ${this.message}`}}class o extends r("FieldDecodingError"){}class l extends r("InternalParserError"){}let u=e=>class extends s{constructor(t){super(e,t)}}},8859:(e,t,i)=>{"use strict";i.r(t),i.d(t,{APEv2Parser:()=>_,ApeContentError:()=>v});var r,n=i(820),a=i(759),s=i(7385),o=i(934),l=i(6701),u=i(5114),c=i(9687);!function(e){e[e.text_utf8=0]="text_utf8",e[e.binary=1]="binary",e[e.external_info=2]="external_info",e[e.reserved=3]="reserved"}(r||(r={}));let h={len:52,get:(e,t)=>({ID:c.e.get(e,t),version:s.UINT32_LE.get(e,t+4)/1e3,descriptorBytes:s.UINT32_LE.get(e,t+8),headerBytes:s.UINT32_LE.get(e,t+12),seekTableBytes:s.UINT32_LE.get(e,t+16),headerDataBytes:s.UINT32_LE.get(e,t+20),apeFrameDataBytes:s.UINT32_LE.get(e,t+24),apeFrameDataBytesHigh:s.UINT32_LE.get(e,t+28),terminatingDataBytes:s.UINT32_LE.get(e,t+32),fileMD5:new s.Uint8ArrayType(16).get(e,t+36)})},f={len:24,get:(e,t)=>({compressionLevel:s.UINT16_LE.get(e,t),formatFlags:s.UINT16_LE.get(e,t+2),blocksPerFrame:s.UINT32_LE.get(e,t+4),finalFrameBlocks:s.UINT32_LE.get(e,t+8),totalFrames:s.UINT32_LE.get(e,t+12),bitsPerSample:s.UINT16_LE.get(e,t+16),channel:s.UINT16_LE.get(e,t+18),sampleRate:s.UINT32_LE.get(e,t+20)})},d={len:32,get:(e,t)=>({ID:new s.StringType(8,"ascii").get(e,t),version:s.UINT32_LE.get(e,t+8),size:s.UINT32_LE.get(e,t+12),fields:s.UINT32_LE.get(e,t+16),flags:m(s.UINT32_LE.get(e,t+20))})},p={len:8,get:(e,t)=>({size:s.UINT32_LE.get(e,t),flags:m(s.UINT32_LE.get(e,t+4))})};function m(e){return{containsHeader:(-0x80000000&e)!=0,containsFooter:(0x40000000&e)!=0,isHeader:(0x20000000&e)!=0,readOnly:(1&e)!=0,dataType:(6&e)>>1}}var g=i(6122);let y=n("music-metadata:parser:APEv2"),b="APEv2",w="APETAGEX";class v extends(0,g.fO)("APEv2"){}class _ extends u.s{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,t,i){return new _(e,t,i).tryParseApeHeader()}static calculateDuration(e){let t=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return(t+=e.finalFrameBlocks)/e.sampleRate}static async findApeFooterOffset(e,t){let i=new Uint8Array(d.len),r=e.position;await e.readBuffer(i,{position:t-d.len}),e.setPosition(r);let n=d.get(i,0);if("APETAGEX"===n.ID)return n.flags.isHeader?y(`APE Header found at offset=${t-d.len}`):(y(`APE Footer found at offset=${t-d.len}`),t-=n.size),{footer:n,offset:t}}static parseTagFooter(e,t,i){let r=d.get(t,t.length-d.len);if(r.ID!==w)throw new v("Unexpected APEv2 Footer ID preamble value");return a.vY(t),new _(e,a.vY(t),i).parseTags(r)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<d.len){y("No APEv2 header found, end-of-file reached");return}let e=await this.tokenizer.peekToken(d);if(e.ID===w)return await this.tokenizer.ignore(d.len),this.parseTags(e);if(y(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){let e=new Uint8Array(this.tokenizer.fileInfo.size-this.tokenizer.position);return await this.tokenizer.readBuffer(e),_.parseTagFooter(this.metadata,e,this.options)}}async parse(){let e=await this.tokenizer.readToken(h);if("MAC "!==e.ID)throw new v("Unexpected descriptor ID");this.ape.descriptor=e;let t=e.descriptorBytes-h.len,i=await (t>0?this.parseDescriptorExpansion(t):this.parseHeader());return await this.tokenizer.ignore(i.forwardBytes),this.tryParseApeHeader()}async parseTags(e){let t=new Uint8Array(256),i=e.size-d.len;y(`Parse APE tags at offset=${this.tokenizer.position}, size=${i}`);for(let n=0;n<e.fields;n++){if(i<p.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-n} items remaining, but no more tag data to read.`);break}let a=await this.tokenizer.readToken(p);i-=p.len+a.size,await this.tokenizer.peekBuffer(t,{length:Math.min(t.length,i)});let u=l.sX(t,0,t.length),c=await this.tokenizer.readToken(new s.StringType(u,"ascii"));switch(await this.tokenizer.ignore(1),i-=c.length+1,a.flags.dataType){case r.text_utf8:{let e=(await this.tokenizer.readToken(new s.StringType(a.size,"utf8"))).split(/\x00/g);await Promise.all(e.map(e=>this.metadata.addTag(b,c,e)));break}case r.binary:if(this.options.skipCovers)await this.tokenizer.ignore(a.size);else{let e=new Uint8Array(a.size);await this.tokenizer.readBuffer(e),u=l.sX(e,0,e.length);let t=(0,o.SW)(e.slice(0,u)),i=e.slice(u+1);await this.metadata.addTag(b,c,{description:t,data:i})}break;case r.external_info:y(`Ignore external info ${c}`),await this.tokenizer.ignore(a.size);break;case r.reserved:y(`Ignore external info ${c}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${c}"`),await this.tokenizer.ignore(a.size)}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){let e=await this.tokenizer.readToken(f);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",_.calculateDuration(e)),!this.ape.descriptor)throw new v("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}},5114:(e,t,i)=>{"use strict";i.d(t,{s:()=>r});class r{constructor(e,t,i){this.metadata=e,this.tokenizer=t,this.options=i}}},9687:(e,t,i)=>{"use strict";i.d(t,{e:()=>o});var r=i(934),n=i(6701),a=i(6122);let s=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,o={len:4,get:(e,t)=>{let i=(0,r.SW)(e.slice(t,t+o.len),"latin1");if(!i.match(s))throw new a.gP(`FourCC contains invalid characters: ${n.DY(i)} "${i}"`);return i},put:(e,t,i)=>{let n=(0,r.Al)(i);if(4!==n.length)throw new a.nK("Invalid length");return e.set(n,t),t+4}}},6701:(e,t,i)=>{"use strict";i.d(t,{DY:()=>h,F6:()=>l,cD:()=>c,f5:()=>u,mh:()=>a,qW:()=>o,sX:()=>s,sc:()=>function e(t,i){if(255===t[0]&&254===t[1])return e(t.subarray(2),i);if("utf-16le"===i&&254===t[0]&&255===t[1]){if((1&t.length)!=0)throw new n.gP("Expected even number of octets for 16-bit unicode string");return e(function(e){let t=e.length;if((1&t)!=0)throw new n.gP("Buffer length must be even");for(let i=0;i<t;i+=2){let t=e[i];e[i]=e[i+1],e[i+1]=t}return e}(t),i)}return new r.StringType(t.length,i).get(t,0)},th:()=>f});var r=i(7385),n=i(6122);function a(e,t,i){return(e[t]&1<<i)!=0}function s(e,t,i,r){let n=t;if("utf-16le"===r){for(;0!==e[n]||0!==e[n+1];){if(n>=i)return i;n+=2}return n}for(;0!==e[n];){if(n>=i)return i;n++}return n}function o(e){let t=e.indexOf("\0");return -1===t?e:e.substr(0,t)}function l(e){return e=(e=e.replace(/^\x00+/g,"")).replace(/\x00+$/g,"")}function u(e,t,i,r){let n=t+~~(i/8),a=i%8,s=e[n];s&=255>>a;let o=8-a,l=r-o;return l<0?s>>=8-a-r:l>0&&(s<<=l,s|=u(e,t,i+o,l)),s}function c(e,t,i){return 1===u(e,t,i,1)}function h(e){let t=[];for(let i=0,r=e.length;i<r;i++){let r=Number(e.charCodeAt(i)).toString(16);t.push(1===r.length?`0${r}`:r)}return t.join(" ")}function f(e){let t=e.split(" ").map(e=>e.trim().toLowerCase());if(t.length>=1){let e=Number.parseFloat(t[0]);return 2===t.length&&"db"===t[1]?{dB:e,ratio:10**(e/10)}:{dB:10*Math.log10(e),ratio:e}}}},5286:(e,t,i)=>{"use strict";i.d(t,{ix:()=>ef,cc:()=>ed});var r=i(759),n=i(7385),a=i(3690);class s{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e?.onClose,e?.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,t=this.position){let i=new Uint8Array(e.len);if(await this.readBuffer(i,{position:t})<e.len)throw new a.d1;return e.get(i,0)}async peekToken(e,t=this.position){let i=new Uint8Array(e.len);if(await this.peekBuffer(i,{position:t})<e.len)throw new a.d1;return e.get(i,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new a.d1;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new a.d1;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(e,t){if(t&&void 0!==t.position&&t.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:!0===t.mayBeLess,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}abort(){return Promise.resolve()}}class o extends s{constructor(e,t){super(t),this.streamReader=e,this.fileInfo=t?.fileInfo??{}}async readBuffer(e,t){let i=this.normalizeOptions(e,t),r=i.position-this.position;if(r>0)return await this.ignore(r),this.readBuffer(e,t);if(r<0)throw Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===i.length)return 0;let n=await this.streamReader.read(e,i.offset,i.length);if(this.position+=n,(!t||!t.mayBeLess)&&n<i.length)throw new a.d1;return n}async peekBuffer(e,t){let i=this.normalizeOptions(e,t),r=0;if(i.position){let t=i.position-this.position;if(t>0){let n=new Uint8Array(i.length+t);return r=await this.peekBuffer(n,{mayBeLess:i.mayBeLess}),e.set(n.subarray(t),i.offset),r-t}if(t<0)throw Error("Cannot peek from a negative offset in a stream")}if(i.length>0){try{r=await this.streamReader.peek(e,i.offset,i.length)}catch(e){if(t?.mayBeLess&&e instanceof a.d1)return 0;throw e}if(!i.mayBeLess&&r<i.length)throw new a.d1}return r}async ignore(e){let t=Math.min(256e3,e),i=new Uint8Array(t),r=0;for(;r<e;){let n=e-r,a=await this.readBuffer(i,{length:Math.min(t,n)});if(a<0)return a;r+=a}return r}abort(){return this.streamReader.abort()}supportsRandomAccess(){return!1}}class l extends s{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo={...t?.fileInfo??{},size:e.length}}async readBuffer(e,t){if(t?.position){if(t.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}let i=await this.peekBuffer(e,t);return this.position+=i,i}async peekBuffer(e,t){let i=this.normalizeOptions(e,t),r=Math.min(this.uint8Array.length-i.position,i.length);if(!i.mayBeLess&&r<i.length)throw new a.d1;return e.set(this.uint8Array.subarray(i.position,i.position+r),i.offset),r}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}var u=i(934);let c={get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4};async function h(e){return new d().fromBuffer(e)}function f(e,t,i){for(let[r,n]of(i={offset:0,...i},t.entries()))if(i.mask){if(n!==(i.mask[r]&e[r+i.offset]))return!1}else if(n!==e[r+i.offset])return!1;return!0}class d{constructor(e){this.detectors=e?.customDetectors,this.tokenizerOptions={abortSignal:e?.signal},this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){let t=e.position;for(let i of this.detectors||[]){let r=await i(e);if(r)return r;if(t!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);let t=e instanceof Uint8Array?e:new Uint8Array(e);if(t?.length>1)return this.fromTokenizer(new l(t,this.tokenizerOptions))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){var t;let i=await (t=this.tokenizerOptions,new o(new a.yT(e),t));try{return await this.fromTokenizer(i)}finally{await i.close()}}async toDetectionStream(e,t){let i,r;let{sampleSize:n=4100}=t,s=e.getReader({mode:"byob"});try{let{value:e,done:t}=await s.read(new Uint8Array(n));if(r=e,!t&&e)try{i=await this.fromBuffer(e.slice(0,n))}catch(e){if(!(e instanceof a.d1))throw e;i=void 0}r=e}finally{s.releaseLock()}let o=new TransformStream({async start(e){e.enqueue(r)},transform(e,t){t.enqueue(e)}}),l=e.pipeThrough(o);return l.fileType=i,l}check(e,t){return f(this.buffer,e,t)}checkString(e,t){return this.check([...e].map(e=>e.charCodeAt(0)),t)}async parse(e){if(this.buffer=new Uint8Array(4100),void 0===e.fileInfo.size&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return(await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);let t=await e.readToken(c);return e.position+t>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(t),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===this.buffer[0]||70===this.buffer[0])&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});let t=new DataView(this.buffer.buffer),i={compressedSize:t.getUint32(18,!0),uncompressedSize:t.getUint32(22,!0),filenameLength:t.getUint16(26,!0),extraFieldLength:t.getUint16(28,!0)};if(i.filename=await e.readToken(new n.StringType(i.filenameLength,"utf-8")),await e.ignore(i.extraFieldLength),/classes\d*\.dex/.test(i.filename))return{ext:"apk",mime:"application/vnd.android.package-archive"};if("META-INF/mozilla.rsa"===i.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(i.filename.endsWith(".rels")||i.filename.endsWith(".xml"))switch(i.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"}}if(i.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(i.filename.startsWith("3D/")&&i.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===i.filename&&i.compressedSize===i.uncompressedSize){let t=await e.readToken(new n.StringType(i.compressedSize,"utf-8"));switch(t=t.trim()){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===i.compressedSize){let t=-1;for(;t<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),t=(0,u.qh)(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(t>=0?t:this.buffer.length)}else await e.ignore(i.compressedSize)}}catch(e){if(!(e instanceof a.d1))throw e}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);let t=new Uint8Array(8);return(await e.readBuffer(t),f(t,[79,112,117,115,72,101,97,100]))?{ext:"opus",mime:"audio/ogg; codecs=opus"}:f(t,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:f(t,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:f(t,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:f(t,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:f(t,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(3===this.buffer[2]||5===this.buffer[2]||7===this.buffer[2])&&(4===this.buffer[3]||6===this.buffer[3]||8===this.buffer[3]))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&(96&this.buffer[8])!=0){let e=new n.StringType(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(e){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(e.startsWith("3g")){if(e.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);let t=new Uint8Array(Math.min(0xa00000,e.fileInfo.size));if(await e.readBuffer(t,{mayBeLess:!0}),(0,u.mK)(t,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(e){if(!(e instanceof a.d1))throw e}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let e=await this.readTiffHeader(!1);if(e)return e}if(this.check([77,77])){let e=await this.readTiffHeader(!0);if(e)return e}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function t(){let t=await e.peekNumber(n.UINT8),i=128,r=0;for(;(t&i)==0&&0!==i;)++r,i>>=1;let a=new Uint8Array(r+1);return await e.readBuffer(a),a}async function i(){let e=await t(),i=await t();i[0]^=128>>i.length-1;let r=Math.min(6,i.length),n=new DataView(e.buffer),a=new DataView(i.buffer,i.length-r,r);return{id:(0,u.AW)(n),len:(0,u.AW)(a)}}async function r(t){for(;t>0;){let r=await i();if(17026===r.id)return(await e.readToken(new n.StringType(r.len))).replaceAll(/\00.*$/g,"");await e.ignore(r.len),--t}}let a=await i();switch(await r(a.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(0===this.buffer[6]||1===this.buffer[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let e=new n.StringType(4,"latin1").get(this.buffer,2);if(e.match("^d*")&&e>=1e3&&e<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return(await e.ignore(8),"debian-binary"===await e.readToken(new n.StringType(13,"ascii")))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&["\n","\r","	"," ","\0"].some(e=>this.checkString(e,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){async function s(){return{length:await e.readToken(n.INT32_BE),type:await e.readToken(new n.StringType(4,"latin1"))}}await e.ignore(8);do{let t=await s();if(t.length<0)return;switch(t.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(t.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function o(){let t=new Uint8Array(16);return await e.readBuffer(t),{id:t,size:Number(await e.readToken(n.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){let t=await o(),i=t.size-24;if(f(t.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let t=new Uint8Array(16);if(i-=await e.readBuffer(t),f(t,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(f(t,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new n.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let e=new DataView(this.buffer.buffer).getUint32(12,!0);if(e>12&&this.buffer.length>=e+16)try{let t=new TextDecoder().decode(this.buffer.slice(16,e+16));if(JSON.parse(t).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188})||this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),function(e,t=0){let i=Number.parseInt(new n.StringType(6).get(e,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(i))return!1;let r=256;for(let i=t;i<t+148;i++)r+=e[i];for(let i=t+156;i<t+512;i++)r+=e[i];return i===r}(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){let t=await this.tokenizer.readToken(e?n.UINT16_BE:n.UINT16_LE);switch(this.tokenizer.ignore(10),t){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){let t=await this.tokenizer.readToken(e?n.UINT16_BE:n.UINT16_LE);for(let i=0;i<t;++i){let t=await this.readTiffTag(e);if(t)return t}}async readTiffHeader(e){let t=(e?n.UINT16_BE:n.UINT16_LE).get(this.buffer,2),i=(e?n.UINT32_BE:n.UINT32_LE).get(this.buffer,4);if(42===t){if(i>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(i>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(i),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(43===t)return{ext:"tif",mime:"image/tiff"}}}var p=i(7015),m=i(4041),g=i(820),y=i(5013);let b={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};class w{static toIntOrNull(e){let t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}static normalizeTrack(e){let t=e.toString().split("/");return{no:Number.parseInt(t[0],10)||null,of:Number.parseInt(t[1],10)||null}}constructor(e,t){this.tagTypes=e,this.tagMap=t}mapGenericTag(e,t){e={id:e.id,value:e.value},this.postMap(e,t);let i=this.getCommonName(e.id);return i?{id:i,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,t){}}w.maxRatingScore=1;let v={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class _ extends w{constructor(){super(["ID3v1"],v)}}class T extends w{constructor(e,t){let i={};for(let e of Object.keys(t))i[e.toUpperCase()]=t[e];super(e,i)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}var x=i(6701);let k={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class I extends T{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*w.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],k)}postMap(e,t){switch(e.id){case"UFID":{let t=e.value;"http://musicbrainz.org"===t.owner_identifier&&(e.id+=`:${t.owner_identifier}`,e.value=(0,x.sc)(t.identifier,"latin1"))}break;case"PRIV":{let i=e.value;switch(i.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${i.owner_identifier}`,e.value=4===i.data.length?n.UINT32_LE.get(i.data,0):null,null===e.value&&t.addWarning("Failed to parse PRIV:PeakValue");break;default:t.addWarning(`Unknown PRIV owner-identifier: ${i.data}`)}}break;case"POPM":e.value=I.toRating(e.value)}}}let A={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class E extends w{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],A)}postMap(e){if("WM/SharedUserRating"===e.id){let t=e.id.split(":");e.value=E.toRating(e.value),e.id=t[0]}}}let S={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class C extends T{constructor(){super(["ID3v2.2"],S)}}let R={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class B extends T{constructor(){super(["APEv2"],R)}}let M={"\xa9nam":"title","\xa9ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","\xa9alb":"album","\xa9day":"date","\xa9cmt":"comment","\xa9com":"comment",trkn:"track",disk:"disk","\xa9gen":"genre",covr:"picture","\xa9wrt":"composer","\xa9lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","\xa9grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","\xa9cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","\xa9too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","\xa9mvn":"movement","\xa9mvi":"movementIndex","\xa9mvc":"movementTotal","\xa9wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};class L extends T{constructor(){super(["iTunes"],M)}postMap(e,t){"rate"===e.id&&(e.value={source:void 0,rating:Number.parseFloat(e.value)/100})}}let D={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class O extends w{static toRating(e,t,i){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(t)/i*w.maxRatingScore}}constructor(){super(["vorbis"],D)}postMap(e){if("RATING"===e.id)e.value=O.toRating(void 0,e.value,100);else if(0===e.id.indexOf("RATING:")){let t=e.id.split(":");e.value=O.toRating(t[1],e.value,1),e.id=t[0]}}}let N={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class z extends w{constructor(){super(["exif"],N)}}let P={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class U extends T{constructor(){super(["matroska"],P)}}let F={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class G extends w{constructor(){super(["AIFF"],F)}}var X=i(6122);class W{constructor(){this.tagMappers={},[new _,new C,new I,new L,new L,new O,new B,new E,new z,new U,new G].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,t,i){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(t,i);throw new X.nK(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(let t of e.tagTypes)this.tagMappers[t]=e}}let q=g("music-metadata:collector"),$=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class j{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new W;let t=1;for(let e of $)this.originPriority[e]=t++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){q(`streamInfo: type=${e.type?y.S[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,t){q(`format: ${e} = ${t}`),this.format[e]=t,this.opts?.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:t}})}async addTag(e,t,i){q(`tag ${e}.${t} = ${i}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:t,value:i}),await this.toCommon(e,t,i)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,t){switch(t.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:t.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:t.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||-1===this.common.artists.indexOf(t.value))){var i;let e=(i=(this.common.artists||[]).concat([t.value])).length>2?`${i.slice(0,i.length-1).join(", ")} & ${i[i.length-1]}`:i.join(" & ");this.setGenericTag("artificial",{id:"artist",value:e})}break;case"picture":return this.postFixPicture(t.value).then(i=>{null!==i&&(t.value=i,this.setGenericTag(e,t))});case"totaltracks":this.common.track.of=w.toIntOrNull(t.value);return;case"totaldiscs":this.common.disk.of=w.toIntOrNull(t.value);return;case"movementTotal":this.common.movementIndex.of=w.toIntOrNull(t.value);return;case"track":case"disk":case"movementIndex":{let e=this.common[t.id].of;this.common[t.id]=w.normalizeTrack(t.value),this.common[t.id].of=null!=e?e:this.common[t.id].of;return}case"bpm":case"year":case"originalyear":t.value=Number.parseInt(t.value,10);break;case"date":{let e=Number.parseInt(t.value.substr(0,4),10);Number.isNaN(e)||(this.common.year=e);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":t.value="string"==typeof t.value?Number.parseInt(t.value,10):t.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":t.value=(0,x.th)(t.value);break;case"replaygain_track_minmax":t.value=t.value.split(",").map(e=>Number.parseInt(e,10));break;case"replaygain_undo":{let e=t.value.split(",").map(e=>Number.parseInt(e,10));t.value={leftChannel:e[0],rightChannel:e[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":t.value="1"===t.value||1===t.value;break;case"isrc":{let e=this.common[t.id];if(e&&-1!==e.indexOf(t.value))return;break}case"comment":"string"==typeof t.value&&(t.value={text:t.value}),"iTunPGAP"===t.value.descriptor&&this.setGenericTag(e,{id:"gapless",value:"1"===t.value.text});break;case"lyrics":"string"==typeof t.value&&(t.value=function(e){let t=e.split("\n"),i=[],r=/\[(\d{2}):(\d{2})\.(\d{2})\]/;for(let e of t){let t=e.match(r);if(t){let n=(60*Number.parseInt(t[1],10)+Number.parseInt(t[2],10))*1e3+10*Number.parseInt(t[3],10),a=e.replace(r,"").trim();i.push({timestamp:n,text:a})}}return{contentType:y.MW.lyrics,timeStampFormat:y.sd.milliseconds,syncText:i}}(t.value))}null!==t.value&&this.setGenericTag(e,t)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){let t=await h(Uint8Array.from(e.data));if(!t)return null;e.format=t.mime}return e.format=e.format.toLocaleLowerCase(),"image/jpg"===e.format&&(e.format="image/jpeg"),e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,t,i){let r=this.tagMapper.mapTag(e,{id:t,value:i},this);r&&await this.postMap(e,r)}setGenericTag(e,t){var i,r;q(`common.${t.id} = ${t.value}`);let n=this.commonOrigin[t.id]||1e3,a=this.originPriority[e];if(b[i=t.id]&&!b[i].multiple){if(!(a<=n))return q(`Ignore native tag (singleton): ${e}.${t.id} = ${t.value}`);this.common[t.id]=t.value,this.commonOrigin[t.id]=a}else if(a===n)(!b[r=t.id].multiple||b[r].unique)&&-1!==this.common[t.id].indexOf(t.value)?q(`Ignore duplicate value: ${e}.${t.id} = ${t.value}`):this.common[t.id].push(t.value);else{if(!(a<n))return q(`Ignore native tag (list): ${e}.${t.id} = ${t.value}`);this.common[t.id]=[t.value],this.commonOrigin[t.id]=a}this.opts?.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:t.id,value:t.value}})}}let Y={parserType:"mpeg",extensions:[".mp2",".mp3",".m2a",".aac","aacp"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(253)]).then(i.bind(i,9253))).MpegParser(e,t,r)},H={parserType:"apev2",extensions:[".ape"],load:async(e,t,r)=>new(await Promise.resolve().then(i.bind(i,8859))).APEv2Parser(e,t,r)},K={parserType:"asf",extensions:[".asf"],load:async(e,t,r)=>new(await i.e(684).then(i.bind(i,3684))).AsfParser(e,t,r)},V={parserType:"dsdiff",extensions:[".dff"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(255)]).then(i.bind(i,2636))).DsdiffParser(e,t,r)},Z={parserType:"aiff",extensions:[".aif","aiff","aifc"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(743)]).then(i.bind(i,4743))).AIFFParser(e,t,r)},J={parserType:"dsf",extensions:[".dsf"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(634)]).then(i.bind(i,3634))).DsfParser(e,t,r)},Q={parserType:"flac",extensions:[".flac"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(881)]).then(i.bind(i,9881))).FlacParser(e,t,r)},ee={parserType:"matroska",extensions:[".mka",".mkv",".mk3d",".mks","webm"],load:async(e,t,r)=>new(await i.e(131).then(i.bind(i,7131))).MatroskaParser(e,t,r)},et={parserType:"mp4",extensions:[".mp4",".m4a",".m4b",".m4pa","m4v","m4r","3gp"],load:async(e,t,r)=>new(await i.e(379).then(i.bind(i,6379))).MP4Parser(e,t,r)},ei={parserType:"musepack",extensions:[".mpc"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(246)]).then(i.bind(i,246))).MusepackParser(e,t,r)},er={parserType:"ogg",extensions:[".ogg",".ogv",".oga",".ogm",".ogx",".opus",".spx"],load:async(e,t,r)=>new(await i.e(88).then(i.bind(i,7088))).OggParser(e,t,r)},en={parserType:"wavpack",extensions:[".wv",".wvp"],load:async(e,t,r)=>new(await i.e(142).then(i.bind(i,142))).WavPackParser(e,t,r)},ea={parserType:"riff",extensions:[".wav","wave",".bwf"],load:async(e,t,r)=>new(await Promise.all([i.e(168),i.e(375)]).then(i.bind(i,3375))).WaveParser(e,t,r)},es=g("music-metadata:parser:factory");class eo{constructor(){this.parsers=[],[Q,Y,H,et,ee,ea,er,K,Z,en,ei,J,V].forEach(e=>this.registerParser(e))}registerParser(e){this.parsers.push(e)}async parse(e,t,i){if(e.supportsRandomAccess()?(es("tokenizer supports random-access, scanning for appending headers"),await ed(e,i)):es("tokenizer does not support random-access, cannot scan for appending headers"),!t){let i=new Uint8Array(4100);if(e.fileInfo.mimeType&&(t=this.findLoaderForType(el(e.fileInfo.mimeType))),!t&&e.fileInfo.path&&(t=this.findLoaderForExtension(e.fileInfo.path)),!t){es("Guess parser on content..."),await e.peekBuffer(i,{mayBeLess:!0});let r=await h(i);if(!r||!r.mime)throw new X.e6("Failed to determine audio format");if(es(`Guessed file type is mime=${r.mime}, extension=${r.ext}`),!(t=this.findLoaderForType(el(r.mime))))throw new X.qq(`Guessed MIME-type not supported: ${r.mime}`)}}es(`Loading ${t.parserType} parser...`);let r=new j(i),n=await t.load(r,e,i??{});return es(`Parser ${t.parserType} loaded`),await n.parse(),r.toCommonMetadata()}findLoaderForExtension(e){if(!e)return;let t=(function(e){let t=e.lastIndexOf(".");return -1===t?"":e.slice(t)})(e).toLocaleLowerCase()||e;return this.parsers.find(e=>-1!==e.extensions.indexOf(t))}findLoaderForType(e){return e?this.parsers.find(t=>t.parserType===e):void 0}}function el(e){let t;if(!e)return;try{t=function(e){let t=p.parse(e),i=(0,m.qg)(t.type);return{type:i.type,subtype:i.subtype,suffix:i.suffix,parameters:t.parameters}}(e)}catch(t){es(`Invalid HTTP Content-Type header value: ${e}`);return}let i=0===t.subtype.indexOf("x-")?t.subtype.substring(2):t.subtype;switch(t.type){case"audio":switch(i){case"mp3":case"mpeg":case"aac":case"aacp":return"mpeg";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf";case"amr":return"amr"}break;case"video":switch(i){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(i){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}}}var eu=i(8859),ec=i(1391);async function eh(e){let t=e.fileInfo.size;if(t>=143){let i=new Uint8Array(15),r=e.position;await e.readBuffer(i,{position:t-143}),e.setPosition(r);let n=new TextDecoder("latin1").decode(i);if("LYRICS200"===n.slice(6))return Number.parseInt(n.slice(0,6),10)+15}return 0}async function ef(e,t,i={}){return function(e,t){return new eo().parse(e,void 0,t)}((0,r.vY)(e,{fileInfo:"string"==typeof t?{mimeType:t}:t}),i)}async function ed(e,t={}){let i=e.fileInfo.size;await (0,ec.zc)(e)&&(i-=128,i-=await eh(e)),t.apeHeader=await eu.APEv2Parser.findApeFooterOffset(e,i)}},1391:(e,t,i)=>{"use strict";i.d(t,{Bn:()=>f,jR:()=>u,zc:()=>d});var r=i(820),n=i(7385),a=i(6701),s=i(5114),o=i(8859);let l=r("music-metadata:parser:ID3v1"),u=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],c={len:128,get:(e,t)=>{let i=new h(3).get(e,t);return"TAG"===i?{header:i,title:new h(30).get(e,t+3),artist:new h(30).get(e,t+33),album:new h(30).get(e,t+63),year:new h(4).get(e,t+93),comment:new h(28).get(e,t+97),zeroByte:n.UINT8.get(e,t+127),track:n.UINT8.get(e,t+126),genre:n.UINT8.get(e,t+127)}:null}};class h{constructor(e){this.len=e,this.stringType=new n.StringType(e,"latin1")}get(e,t){let i=this.stringType.get(e,t);return(i=(i=a.qW(i)).trim()).length>0?i:void 0}}class f extends s.s{constructor(e,t,i){super(e,t,i),this.apeHeader=i.apeHeader}static getGenre(e){if(e<u.length)return u[e]}async parse(){if(!this.tokenizer.fileInfo.size){l("Skip checking for ID3v1 because the file-size is unknown");return}if(this.apeHeader){this.tokenizer.ignore(this.apeHeader.offset-this.tokenizer.position);let e=new o.APEv2Parser(this.metadata,this.tokenizer,this.options);await e.parseTags(this.apeHeader.footer)}let e=this.tokenizer.fileInfo.size-c.len;if(this.tokenizer.position>e){l("Already consumed the last 128 bytes");return}let t=await this.tokenizer.readToken(c,e);if(t){for(let e of(l("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-c.len),["title","artist","album","comment","track","year"]))t[e]&&""!==t[e]&&await this.addTag(e,t[e]);let e=f.getGenre(t.genre);e&&await this.addTag("genre",e)}else l("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-c.len)}async addTag(e,t){await this.metadata.addTag("ID3v1",e,t)}}async function d(e){if(e.fileInfo.size>=128){let t=new Uint8Array(3),i=e.position;return await e.readBuffer(t,{position:e.fileInfo.size-128}),e.setPosition(i),"TAG"===new TextDecoder("latin1").decode(t)}return!1}},6653:(e,t,i)=>{"use strict";i.d(t,{Jp:()=>f,MW:()=>n,St:()=>l,YF:()=>h,aY:()=>d,n5:()=>r,nl:()=>c,sd:()=>a,yW:()=>u});var r,n,a,s=i(7385),o=i(6701);!function(e){e[e.Other=0]="Other",e[e["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",e[e["Other file icon"]=2]="Other file icon",e[e["Cover (front)"]=3]="Cover (front)",e[e["Cover (back)"]=4]="Cover (back)",e[e["Leaflet page"]=5]="Leaflet page",e[e["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",e[e["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",e[e["Artist/performer"]=8]="Artist/performer",e[e.Conductor=9]="Conductor",e[e["Band/Orchestra"]=10]="Band/Orchestra",e[e.Composer=11]="Composer",e[e["Lyricist/text writer"]=12]="Lyricist/text writer",e[e["Recording Location"]=13]="Recording Location",e[e["During recording"]=14]="During recording",e[e["During performance"]=15]="During performance",e[e["Movie/video screen capture"]=16]="Movie/video screen capture",e[e["A bright coloured fish"]=17]="A bright coloured fish",e[e.Illustration=18]="Illustration",e[e["Band/artist logotype"]=19]="Band/artist logotype",e[e["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"}(r||(r={})),function(e){e[e.other=0]="other",e[e.lyrics=1]="lyrics",e[e.text=2]="text",e[e.movement_part=3]="movement_part",e[e.events=4]="events",e[e.chord=5]="chord",e[e.trivia_pop=6]="trivia_pop"}(n||(n={})),function(e){e[e.notSynchronized0=0]="notSynchronized0",e[e.mpegFrameNumber=1]="mpegFrameNumber",e[e.milliseconds=2]="milliseconds"}(a||(a={}));let l={get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4},u={len:10,get:(e,t)=>({fileIdentifier:new s.StringType(3,"ascii").get(e,t),version:{major:s.INT8.get(e,t+3),revision:s.INT8.get(e,t+4)},flags:{unsynchronisation:o.mh(e,t+5,7),isExtendedHeader:o.mh(e,t+5,6),expIndicator:o.mh(e,t+5,5),footer:o.mh(e,t+5,4)},size:l.get(e,t+6)})},c={len:10,get:(e,t)=>({size:s.UINT32_BE.get(e,t),extendedFlags:s.UINT16_BE.get(e,t+4),sizeOfPadding:s.UINT32_BE.get(e,t+6),crcDataPresent:o.mh(e,t+4,31)})},h={len:1,get:(e,t)=>{switch(e[t]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};default:return{encoding:"utf8",bom:!1}}}},f={len:4,get:(e,t)=>({encoding:h.get(e,t),language:new s.StringType(3,"latin1").get(e,t+1)})},d={len:6,get:(e,t)=>{let i=f.get(e,t);return{encoding:i.encoding,language:i.language,timeStampFormat:s.UINT8.get(e,t+4),contentType:s.UINT8.get(e,t+5)}}}},3777:(e,t,i)=>{"use strict";var r,n;i.d(t,{S:()=>n,y:()=>r}),function(e){e[e.shot=10]="shot",e[e.scene=20]="scene",e[e.track=30]="track",e[e.part=40]="part",e[e.album=50]="album",e[e.edition=60]="edition",e[e.collection=70]="collection"}(r||(r={})),function(e){e[e.video=1]="video",e[e.audio=2]="audio",e[e.complex=3]="complex",e[e.logo=4]="logo",e[e.subtitle=17]="subtitle",e[e.button=18]="button",e[e.control=32]="control"}(n||(n={}))},5013:(e,t,i)=>{"use strict";i.d(t,{MW:()=>n.MW,S:()=>r.S,sd:()=>n.sd});var r=i(3777),n=i(6653)},3690:(e,t,i)=>{"use strict";i.d(t,{d1:()=>r,yT:()=>a});class r extends Error{constructor(){super("End-Of-Stream")}}class n{constructor(){this.maxStreamReadSize=1048576,this.endOfStream=!1,this.peekQueue=[]}async peek(e,t,i){let r=await this.read(e,t,i);return this.peekQueue.push(e.subarray(t,t+r)),r}async read(e,t,i){if(0===i)return 0;let n=this.readFromPeekBuffer(e,t,i);if(0===(n+=await this.readRemainderFromStream(e,t+n,i-n)))throw new r;return n}readFromPeekBuffer(e,t,i){let r=i,n=0;for(;this.peekQueue.length>0&&r>0;){let i=this.peekQueue.pop();if(!i)throw Error("peekData should be defined");let a=Math.min(i.length,r);e.set(i.subarray(0,a),t+n),n+=a,r-=a,a<i.length&&this.peekQueue.push(i.subarray(a))}return n}async readRemainderFromStream(e,t,i){let r=i,n=0;for(;r>0&&!this.endOfStream;){let i=Math.min(r,this.maxStreamReadSize),a=await this.readFromStream(e,t+n,i);if(0===a)break;n+=a,r-=a}return n}}class a extends n{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,t,i){if(this.endOfStream)throw new r;let n=await this.reader.read(new Uint8Array(i));return(n.done&&(this.endOfStream=n.done),n.value)?(e.set(n.value,t),n.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}}},759:(e,t,i)=>{"use strict";i.d(t,{d1:()=>r.d1,vY:()=>s});var r=i(3690);class n{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e?.onClose,e?.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,t=this.position){let i=new Uint8Array(e.len);if(await this.readBuffer(i,{position:t})<e.len)throw new r.d1;return e.get(i,0)}async peekToken(e,t=this.position){let i=new Uint8Array(e.len);if(await this.peekBuffer(i,{position:t})<e.len)throw new r.d1;return e.get(i,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new r.d1;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new r.d1;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(e,t){if(!this.supportsRandomAccess()&&t&&void 0!==t.position&&t.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return{mayBeLess:!1,offset:0,length:e.length,position:this.position,...t}}abort(){return Promise.resolve()}}class a extends n{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo={...t?.fileInfo??{},size:e.length}}async readBuffer(e,t){t?.position&&(this.position=t.position);let i=await this.peekBuffer(e,t);return this.position+=i,i}async peekBuffer(e,t){let i=this.normalizeOptions(e,t),n=Math.min(this.uint8Array.length-i.position,i.length);if(!i.mayBeLess&&n<i.length)throw new r.d1;return e.set(this.uint8Array.subarray(i.position,i.position+n)),n}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}function s(e,t){return new a(e,t)}},7385:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AnsiStringType:()=>D,Float16_BE:()=>x,Float16_LE:()=>k,Float32_BE:()=>I,Float32_LE:()=>A,Float64_BE:()=>E,Float64_LE:()=>S,Float80_BE:()=>C,Float80_LE:()=>R,INT16_BE:()=>d,INT16_LE:()=>p,INT24_BE:()=>g,INT24_LE:()=>m,INT32_BE:()=>y,INT32_LE:()=>b,INT64_BE:()=>T,INT64_LE:()=>v,INT8:()=>f,IgnoreType:()=>B,StringType:()=>L,UINT16_BE:()=>o,UINT16_LE:()=>s,UINT24_BE:()=>u,UINT24_LE:()=>l,UINT32_BE:()=>h,UINT32_LE:()=>c,UINT64_BE:()=>_,UINT64_LE:()=>w,UINT8:()=>a,Uint8ArrayType:()=>M});var r=i(1109);function n(e){return new DataView(e.buffer,e.byteOffset)}let a={len:1,get:(e,t)=>n(e).getUint8(t),put:(e,t,i)=>(n(e).setUint8(t,i),t+1)},s={len:2,get:(e,t)=>n(e).getUint16(t,!0),put:(e,t,i)=>(n(e).setUint16(t,i,!0),t+2)},o={len:2,get:(e,t)=>n(e).getUint16(t),put:(e,t,i)=>(n(e).setUint16(t,i),t+2)},l={len:3,get(e,t){let i=n(e);return i.getUint8(t)+(i.getUint16(t+1,!0)<<8)},put(e,t,i){let r=n(e);return r.setUint8(t,255&i),r.setUint16(t+1,i>>8,!0),t+3}},u={len:3,get(e,t){let i=n(e);return(i.getUint16(t)<<8)+i.getUint8(t+2)},put(e,t,i){let r=n(e);return r.setUint16(t,i>>8),r.setUint8(t+2,255&i),t+3}},c={len:4,get:(e,t)=>n(e).getUint32(t,!0),put:(e,t,i)=>(n(e).setUint32(t,i,!0),t+4)},h={len:4,get:(e,t)=>n(e).getUint32(t),put:(e,t,i)=>(n(e).setUint32(t,i),t+4)},f={len:1,get:(e,t)=>n(e).getInt8(t),put:(e,t,i)=>(n(e).setInt8(t,i),t+1)},d={len:2,get:(e,t)=>n(e).getInt16(t),put:(e,t,i)=>(n(e).setInt16(t,i),t+2)},p={len:2,get:(e,t)=>n(e).getInt16(t,!0),put:(e,t,i)=>(n(e).setInt16(t,i,!0),t+2)},m={len:3,get(e,t){let i=l.get(e,t);return i>8388607?i-0x1000000:i},put(e,t,i){let r=n(e);return r.setUint8(t,255&i),r.setUint16(t+1,i>>8,!0),t+3}},g={len:3,get(e,t){let i=u.get(e,t);return i>8388607?i-0x1000000:i},put(e,t,i){let r=n(e);return r.setUint16(t,i>>8),r.setUint8(t+2,255&i),t+3}},y={len:4,get:(e,t)=>n(e).getInt32(t),put:(e,t,i)=>(n(e).setInt32(t,i),t+4)},b={len:4,get:(e,t)=>n(e).getInt32(t,!0),put:(e,t,i)=>(n(e).setInt32(t,i,!0),t+4)},w={len:8,get:(e,t)=>n(e).getBigUint64(t,!0),put:(e,t,i)=>(n(e).setBigUint64(t,i,!0),t+8)},v={len:8,get:(e,t)=>n(e).getBigInt64(t,!0),put:(e,t,i)=>(n(e).setBigInt64(t,i,!0),t+8)},_={len:8,get:(e,t)=>n(e).getBigUint64(t),put:(e,t,i)=>(n(e).setBigUint64(t,i),t+8)},T={len:8,get:(e,t)=>n(e).getBigInt64(t),put:(e,t,i)=>(n(e).setBigInt64(t,i),t+8)},x={len:2,get(e,t){return r.read(e,t,!1,10,this.len)},put(e,t,i){return r.write(e,i,t,!1,10,this.len),t+this.len}},k={len:2,get(e,t){return r.read(e,t,!0,10,this.len)},put(e,t,i){return r.write(e,i,t,!0,10,this.len),t+this.len}},I={len:4,get:(e,t)=>n(e).getFloat32(t),put:(e,t,i)=>(n(e).setFloat32(t,i),t+4)},A={len:4,get:(e,t)=>n(e).getFloat32(t,!0),put:(e,t,i)=>(n(e).setFloat32(t,i,!0),t+4)},E={len:8,get:(e,t)=>n(e).getFloat64(t),put:(e,t,i)=>(n(e).setFloat64(t,i),t+8)},S={len:8,get:(e,t)=>n(e).getFloat64(t,!0),put:(e,t,i)=>(n(e).setFloat64(t,i,!0),t+8)},C={len:10,get(e,t){return r.read(e,t,!1,63,this.len)},put(e,t,i){return r.write(e,i,t,!1,63,this.len),t+this.len}},R={len:10,get(e,t){return r.read(e,t,!0,63,this.len)},put(e,t,i){return r.write(e,i,t,!0,63,this.len),t+this.len}};class B{constructor(e){this.len=e}get(e,t){}}class M{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}}class L{constructor(e,t){this.len=e,this.encoding=t,this.textDecoder=new TextDecoder(t)}get(e,t){return this.textDecoder.decode(e.subarray(t,t+this.len))}}class D{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,t=0){return this.textDecoder.decode(e.subarray(t,t+this.len))}}},934:(e,t,i)=>{"use strict";i.d(t,{AS:()=>p,AW:()=>m,Al:()=>c,EY:()=>f,SW:()=>o,mK:()=>y,qh:()=>g});let r=Object.prototype.toString;function n(e,t,i){return!!e&&(e.constructor===t||r.call(e)===i)}function a(e){return n(e,Uint8Array,"[object Uint8Array]")}let s={utf8:new globalThis.TextDecoder("utf8")};function o(e,t="utf8"){return!function(e){if(!(a(e)||n(e,ArrayBuffer,"[object ArrayBuffer]")))throw TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``)}(e),s[t]??=new globalThis.TextDecoder(t),s[t].decode(e)}function l(e){if("string"!=typeof e)throw TypeError(`Expected \`string\`, got \`${typeof e}\``)}let u=new globalThis.TextEncoder;function c(e){return l(e),u.encode(e)}let h=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function f(e){!function(e){if(!a(e))throw TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``)}(e);let t="";for(let i=0;i<e.length;i++)t+=h[e[i]];return t}let d={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function p(e){if(l(e),e.length%2!=0)throw Error("Invalid Hex string length.");let t=e.length/2,i=new Uint8Array(t);for(let r=0;r<t;r++){let t=d[e[2*r]],n=d[e[2*r+1]];if(void 0===t||void 0===n)throw Error(`Invalid Hex character encountered at position ${2*r}`);i[r]=t<<4|n}return i}function m(e){let{byteLength:t}=e;return 6===t?0x100000000*e.getUint16(0)+e.getUint32(2):5===t?0x100000000*e.getUint8(0)+e.getUint32(1):4===t?e.getUint32(0):3===t?65536*e.getUint8(0)+e.getUint16(1):2===t?e.getUint16(0):1===t?e.getUint8(0):void 0}function g(e,t){let i=e.length,r=t.length;if(0===r||r>i)return -1;let n=i-r;for(let i=0;i<=n;i++){let n=!0;for(let a=0;a<r;a++)if(e[i+a]!==t[a]){n=!1;break}if(n)return i}return -1}function y(e,t){return -1!==g(e,t)}}}]);